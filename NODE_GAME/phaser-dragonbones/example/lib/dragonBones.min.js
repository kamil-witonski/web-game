var __extends=this&&this.__extends||function(e,h){function c(){this.constructor=e}for(var a in h)h.hasOwnProperty(a)&&(e[a]=h[a]);e.prototype=null===h?Object.create(h):(c.prototype=h.prototype,new c)},dragonBones;
(function(e){var h=function(){function c(){}c.hasArmature=function(a){return 0<=c._armatures.indexOf(a)};c.addArmature=function(a){a&&0>c._armatures.indexOf(a)&&c._armatures.push(a)};c.removeArmature=function(a){a&&(a=c._armatures.indexOf(a),0<=a&&c._armatures.splice(a,1))};c.PI_D=2*Math.PI;c.PI_H=Math.PI/2;c.PI_Q=Math.PI/4;c.ANGLE_TO_RADIAN=Math.PI/180;c.RADIAN_TO_ANGLE=180/Math.PI;c.SECOND_TO_MILLISECOND=1E3;c.NO_TWEEN=100;c.VERSION="4.7.2";c.debug=!1;c.debugDraw=!1;c._armatures=[];return c}();
e.DragonBones=h})(dragonBones||(dragonBones={}));
(function(e){var h=function(){function c(){this.hashCode=c._hashCode++}c._returnObject=function(a){var b=String(a.constructor),f=null==c._maxCountMap[b]?c._defaultMaxCount:c._maxCountMap[b],b=c._poolsMap[b]=c._poolsMap[b]||[];if(b.length<f)if(0>b.indexOf(a))b.push(a);else throw Error();};c.setMaxCount=function(a,b){var f;if(0>b||b!=b)b=0;if(a){var d=String(a);c._maxCountMap[d]=b;(f=c._poolsMap[d])&&f.length>b&&(f.length=b)}else for(d in c._defaultMaxCount=b,c._poolsMap)null!=c._maxCountMap[d]&&(c._maxCountMap[d]=
b,f=c._poolsMap[d],f.length>b&&(f.length=b))};c.clearPool=function(a){void 0===a&&(a=null);if(a)(a=c._poolsMap[String(a)])&&a.length&&(a.length=0);else for(var b in c._poolsMap)a=c._poolsMap[b],a.length=0};c.borrowObject=function(a){var b=c._poolsMap[String(a)];if(b&&b.length)return b.pop();a=new a;a._onClear();return a};c.prototype.returnToPool=function(){this._onClear();c._returnObject(this)};c._hashCode=0;c._defaultMaxCount=5E3;c._maxCountMap={};c._poolsMap={};return c}();e.BaseObject=h})(dragonBones||
(dragonBones={}));
(function(e){var h=function(c){function a(){c.call(this)}__extends(a,c);a.prototype._onClear=function(){this._isCompleted=!1;this._currentTime=this._currentPlayTimes=-1;this._timeline=null;this._hasAsynchronyTimeline=this._isReverse=!1;this._animationDutation=this._duration=this._position=this._frameCount=this._keyFrameCount=this._frameRate=0;this._timeScale=1;this._timeOffset=0;this._animationState=this._armature=this._currentFrame=null};a.prototype._onUpdateFrame=function(b){};a.prototype._onArriveAtFrame=
function(b){};a.prototype._setCurrentTime=function(b){if(1==this._keyFrameCount&&this!=this._animationState._timeline){this._isCompleted=!0;var a=1}else if(this._hasAsynchronyTimeline){var d=this._animationState.playTimes;a=d*this._duration;b*=this._timeScale;0!=this._timeOffset&&(b+=this._timeOffset*this._animationDutation);0<d&&(b>=a||b<=-a)?(this._isCompleted=!0,a=d,b=0>b?0:this._duration):(this._isCompleted=!1,0>b?(a=Math.floor(-b/this._duration),b=this._duration- -b%this._duration):(a=Math.floor(b/
this._duration),b%=this._duration),0<d&&a>d&&(a=d));b+=this._position}else this._isCompleted=this._animationState._timeline._isCompleted,a=this._animationState._timeline._currentPlayTimes;this._currentPlayTimes=a;if(this._currentTime==b)return!1;this._isReverse=this._currentTime>b&&this._currentPlayTimes==a;this._currentTime=b;return!0};a.prototype.fadeIn=function(b,a,d,k){this._armature=b;this._animationState=a;this._timeline=d;this._hasAsynchronyTimeline=(b=this==this._animationState._timeline)||
this._animationState.animationData.hasAsynchronyTimeline;this._frameRate=this._armature.armatureData.frameRate;this._keyFrameCount=this._timeline.frames.length;this._frameCount=this._animationState.animationData.frameCount;this._position=this._animationState._position;this._duration=this._animationState._duration;this._animationDutation=this._animationState.animationData.duration;this._timeScale=b?1:1/this._timeline.scale;this._timeOffset=b?0:this._timeline.offset};a.prototype.fadeOut=function(){};
a.prototype.update=function(b){!this._isCompleted&&this._setCurrentTime(b)&&(b=this._timeline.frames[1<this._keyFrameCount?Math.floor(this._currentTime*this._frameRate):0],this._currentFrame!=b&&(this._currentFrame=b,this._onArriveAtFrame(!0)),this._onUpdateFrame(!0))};return a}(e.BaseObject);e.TimelineState=h;h=function(c){function a(){c.call(this)}__extends(a,c);a._getEasingValue=function(b,a){if(0>=b)return 0;if(1<=b)return 1;if(2<a)return b;if(1<a){var f=.5*(1-Math.cos(b*Math.PI));--a}else if(0<
a)f=1-Math.pow(1-b,2);else if(-1<=a)a*=-1,f=Math.pow(b,2);else if(-2<=a)f=Math.acos(1-2*b)/Math.PI,a=-1*a-1;else return b;return(f-b)*a+b};a._getCurveEasingValue=function(b,a){if(0>=b)return 0;if(1<=b)return 1;for(var f=0,k=0,l=0,c=a.length;l<c;l+=2)if(f=a[l],k=a[l+1],f>=b){if(0==l)return k*b/f;c=a[l-2];l=a[l-1];return l+(k-l)*(b-c)/(f-c)}return k+(1-k)*(b-f)/(1-f)};a.prototype._onClear=function(){c.prototype._onClear.call(this);this._tweenProgress=0;this._tweenEasing=e.DragonBones.NO_TWEEN;this._curve=
null};a.prototype._onArriveAtFrame=function(b){this._tweenEasing=this._currentFrame.tweenEasing;this._curve=this._currentFrame.curve;if(1>=this._keyFrameCount||this._currentFrame.next==this._timeline.frames[0]&&(this._tweenEasing!=e.DragonBones.NO_TWEEN||this._curve)&&0<this._animationState.playTimes&&this._animationState.currentPlayTimes==this._animationState.playTimes-1)this._tweenEasing=e.DragonBones.NO_TWEEN,this._curve=null};a.prototype._onUpdateFrame=function(b){this._tweenEasing!=e.DragonBones.NO_TWEEN?
(this._tweenProgress=(this._currentTime-this._currentFrame.position+this._position)/this._currentFrame.duration,0!=this._tweenEasing&&(this._tweenProgress=a._getEasingValue(this._tweenProgress,this._tweenEasing))):this._curve?(this._tweenProgress=(this._currentTime-this._currentFrame.position+this._position)/this._currentFrame.duration,this._tweenProgress=a._getCurveEasingValue(this._tweenProgress,this._curve)):this._tweenProgress=0};a.prototype._updateExtensionKeyFrame=function(b,a,d){var f=0;if(b.type==
a.type)for(var l=0,c=b.tweens.length;l<c;++l){var e=a.tweens[l]-b.tweens[l];d.tweens[l]=e;0!=e&&(f=2)}if(0==f)for(d.type!=b.type&&(f=1,d.type=b.type),d.tweens.length!=b.tweens.length&&(f=1,d.tweens.length=b.tweens.length),d.keys.length!=b.keys.length&&(f=1,d.keys.length=b.keys.length),l=0,c=b.keys.length;l<c;++l)a=b.keys[l],d.keys[l]!=a&&(f=1,d.keys[l]=a);return f};return a}(h);e.TweenTimelineState=h})(dragonBones||(dragonBones={}));
(function(e){var h=function(c){function a(){c.call(this);this._animations={};this._animationNames=[];this._animationStates=[]}__extends(a,c);a._sortAnimationState=function(b,a){return b.layer>a.layer?1:-1};a.toString=function(){return"[class dragonBones.Animation]"};a.prototype._onClear=function(){for(var b in this._animations)delete this._animations[b];b=0;for(var a=this._animationStates.length;b<a;++b)this._animationStates[b].returnToPool();this.timeScale=1;this._timelineStateDirty=this._animationStateDirty=
!1;this._armature=null;this._isPlaying=!1;this._time=0;this._lastAnimationState=null;this._animationNames.length=0;this._animationStates.length=0};a.prototype._fadeOut=function(b,a,d,k,l){var f=0,c=this._animationStates.length;switch(k){case 1:for(;f<c;++f)k=this._animationStates[f],k.layer==a&&k.fadeOut(b,l);break;case 2:for(;f<c;++f)k=this._animationStates[f],k.group==d&&k.fadeOut(b,l);break;case 4:for(;f<c;++f)k=this._animationStates[f],k.fadeOut(b,l),0==b?k.returnToPool():k.fadeOut(b,l);0==b&&
(this._animationStates.length=0);break;case 3:for(;f<c;++f)k=this._animationStates[f],k.layer==a&&k.group==d&&k.fadeOut(b,l)}};a.prototype._updateFFDTimelineStates=function(){for(var b=0,a=this._animationStates.length;b<a;++b)this._animationStates[b]._updateFFDTimelineStates()};a.prototype._advanceTime=function(b){if(this._isPlaying){0>b&&(b=-b);var a=this._animationStates.length;if(1==a){var d=this._animationStates[0];d._isFadeOutComplete?(d.returnToPool(),this._animationStates.length=0,this._animationStateDirty=
!0,this._lastAnimationState=null):(this._timelineStateDirty&&d._updateTimelineStates(),d._advanceTime(b,1,0))}else if(1<a)for(var k=this._animationStates[0]._layer,l=1,c=0,e=1,m=0,p=0;m<a;++m)d=this._animationStates[m],d._isFadeOutComplete?(p++,d.returnToPool(),this._animationStateDirty=!0,this._lastAnimationState==d&&(this._lastAnimationState=0<=m-p?this._animationStates[m-p]:null)):(0<p&&(this._animationStates[m-p]=d),k!=d._layer&&(k=d._layer,l=c>=l?0:l-c,c=0),this._timelineStateDirty&&d._updateTimelineStates(),
d._advanceTime(b,l,e),0!=d._weightResult&&(c+=d._weightResult,e++)),m==a-1&&0<p&&(this._animationStates.length-=p);this._timelineStateDirty=!1}};a.prototype.reset=function(){for(var b=0,a=this._animationStates.length;b<a;++b)this._animationStates[b].returnToPool();this._isPlaying=!1;this._lastAnimationState=null;this._animationStates.length=0};a.prototype.stop=function(b){void 0===b&&(b=null);b?(b=this.getState(b))&&b.stop():this._isPlaying=!1};a.prototype.play=function(b,a){void 0===b&&(b=null);
void 0===a&&(a=-1);var f=null;if(b)f=this.fadeIn(b,0,a,0,null,4);else if(this._lastAnimationState)this._isPlaying&&(this._lastAnimationState.isPlaying||this._lastAnimationState.isCompleted)?f=this.fadeIn(this._lastAnimationState.name,0,a,0,null,4):(this._isPlaying=!0,this._lastAnimationState.play());else{var k=this._armature.armatureData.defaultAnimation;k&&(f=this.fadeIn(k.name,0,a,0,null,4))}return f};a.prototype.fadeIn=function(b,f,d,k,l,c,n,m,p,h){void 0===f&&(f=-1);void 0===d&&(d=-1);void 0===
k&&(k=0);void 0===l&&(l=null);void 0===c&&(c=3);void 0===n&&(n=!1);void 0===m&&(m=!0);void 0===p&&(p=!0);void 0===h&&(h=!0);var g=this._animations[b];if(!g)return this._time=0,console.warn("Non-existent animation.","DragonBones: "+this._armature.armatureData.parent.name,"Armature: "+this._armature.name,"Animation: "+b),null;this._time!=this._time&&(this._time=0);this._isPlaying=!0;if(f!=f||0>f)f=this._lastAnimationState?g.fadeInTime:0;0>d&&(d=g.playTimes);this._fadeOut(f,k,l,c,p);this._lastAnimationState=
e.BaseObject.borrowObject(e.AnimationState);this._lastAnimationState._layer=k;this._lastAnimationState._group=l;this._lastAnimationState.additiveBlending=n;this._lastAnimationState.displayControl=m;this._lastAnimationState._fadeIn(this._armature,g.animation||g,b,d,g.position,g.duration,this._time,1/g.scale,f,h);this._animationStates.push(this._lastAnimationState);this._animationStateDirty=!0;this._time=0;1<this._animationStates.length&&this._animationStates.sort(a._sortAnimationState);d=this._armature.getSlots();
k=0;for(l=d.length;k<l;++k)c=d[k],c.inheritAnimation&&(c=c.childArmature)&&c.animation.hasAnimation(b)&&!c.animation.getState(b)&&c.animation.fadeIn(b);0==f&&this._armature.advanceTime(0);return this._lastAnimationState};a.prototype.gotoAndPlayByTime=function(b,a,d){void 0===a&&(a=0);void 0===d&&(d=-1);this._time=a;return this.fadeIn(b,0,d,0,null,4)};a.prototype.gotoAndPlayByFrame=function(b,a,d){void 0===a&&(a=0);void 0===d&&(d=-1);var f=this._animations[b];f&&(this._time=f.duration*a/f.frameCount);
return this.fadeIn(b,0,d,0,null,4)};a.prototype.gotoAndPlayByProgress=function(b,a,d){void 0===a&&(a=0);void 0===d&&(d=-1);var f=this._animations[b];f&&(this._time=f.duration*Math.max(a,0));return this.fadeIn(b,0,d,0,null,4)};a.prototype.gotoAndStopByTime=function(b,a){void 0===a&&(a=0);var f=this.gotoAndPlayByTime(b,a,1);f&&f.stop();return f};a.prototype.gotoAndStopByFrame=function(b,a){void 0===a&&(a=0);var f=this.gotoAndPlayByFrame(b,a,1);f&&f.stop();return f};a.prototype.gotoAndStopByProgress=
function(b,a){void 0===a&&(a=0);var f=this.gotoAndPlayByProgress(b,a,1);f&&f.stop();return f};a.prototype.getState=function(b){for(var a=0,d=this._animationStates.length;a<d;++a){var k=this._animationStates[a];if(k.name==b)return k}return null};a.prototype.hasAnimation=function(b){return null!=this._animations[b]};Object.defineProperty(a.prototype,"isPlaying",{get:function(){return 1<this._animationStates.length?this._isPlaying&&!this.isCompleted:this._lastAnimationState?this._isPlaying&&this._lastAnimationState.isPlaying:
this._isPlaying},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"isCompleted",{get:function(){if(this._lastAnimationState){if(!this._lastAnimationState.isCompleted)return!1;for(var b=0,a=this._animationStates.length;b<a;++b)if(!this._animationStates[b].isCompleted)return!1;return!0}return!1},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"lastAnimationName",{get:function(){return this._lastAnimationState?this._lastAnimationState.name:null},enumerable:!0,configurable:!0});
Object.defineProperty(a.prototype,"lastAnimationState",{get:function(){return this._lastAnimationState},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"animationNames",{get:function(){return this._animationNames},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"animations",{get:function(){return this._animations},set:function(b){if(this._animations!=b){for(var a in this._animations)delete this._animations[a];this._animationNames.length=0;if(b)for(a in b)this._animations[a]=
b[a],this._animationNames.push(a)}},enumerable:!0,configurable:!0});a.prototype.gotoAndPlay=function(b,a,d,k,c,e,n,m,h){void 0===a&&(a=-1);void 0===d&&(d=-1);void 0===k&&(k=-1);void 0===c&&(c=0);void 0===e&&(e=null);void 0===n&&(n=3);void 0===m&&(m=!0);void 0===h&&(h=!0);(b=this.fadeIn(b,a,k,c,e,n,!1,!0,m,h))&&d&&0<d&&(b.timeScale=b.totalTime/d);return b};a.prototype.gotoAndStop=function(b,a){void 0===a&&(a=0);return this.gotoAndStopByTime(b,a)};Object.defineProperty(a.prototype,"animationList",{get:function(){return this._animationNames},
enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"animationDataList",{get:function(){for(var b=[],a=0,d=this._animationNames.length;a<d;++a)b.push(this._animations[this._animationNames[a]]);return b},enumerable:!0,configurable:!0});return a}(e.BaseObject);e.Animation=h})(dragonBones||(dragonBones={}));
(function(e){var h=function(c){function a(){c.call(this);this._boneMask=[];this._boneTimelines=[];this._slotTimelines=[];this._ffdTimelines=[];this.autoTween=!1}__extends(a,c);a.toString=function(){return"[class dragonBones.AnimationState]"};a.prototype._onClear=function(){for(var b=0,a=this._boneTimelines.length;b<a;++b)this._boneTimelines[b].returnToPool();b=0;for(a=this._slotTimelines.length;b<a;++b)this._slotTimelines[b].returnToPool();b=0;for(a=this._ffdTimelines.length;b<a;++b)this._ffdTimelines[b].returnToPool();
this.displayControl=!0;this.actionEnabled=this.additiveBlending=!1;this.weight=this.timeScale=this.playTimes=1;this.autoFadeOutTime=-1;this.fadeTotalTime=0;this._isFadeOutComplete=!1;this._fadeProgress=this._weightResult=this._duration=this._position=this._layer=0;this._group=null;this._timeline&&(this._timeline.returnToPool(),this._timeline=null);this._isPlaying=!0;this._isFadeOut=this._isPausePlayhead=!1;this._time=this._fadeTime=0;this._animationData=this._armature=this._name=null;this._boneMask.length=
0;this._boneTimelines.length=0;this._slotTimelines.length=0;this._ffdTimelines.length=0};a.prototype._advanceFadeTime=function(b){0>b&&(b=-b);this._fadeTime+=b;var a=this._fadeTime>=this.fadeTotalTime?this._isFadeOut?0:1:0<this._fadeTime?this._isFadeOut?1-this._fadeTime/this.fadeTotalTime:this._fadeTime/this.fadeTotalTime:this._isFadeOut?1:0;this._fadeProgress!=a&&(this._fadeProgress=a,a=this._armature._display,this._fadeTime<=b&&(this._isFadeOut?a.hasEvent(e.EventObject.FADE_OUT)&&(b=e.BaseObject.borrowObject(e.EventObject),
b.animationState=this,this._armature._bufferEvent(b,e.EventObject.FADE_OUT)):a.hasEvent(e.EventObject.FADE_IN)&&(b=e.BaseObject.borrowObject(e.EventObject),b.animationState=this,this._armature._bufferEvent(b,e.EventObject.FADE_IN))),this._fadeTime>=this.fadeTotalTime&&(this._isFadeOut?(this._isFadeOutComplete=!0,a.hasEvent(e.EventObject.FADE_OUT_COMPLETE)&&(a=e.BaseObject.borrowObject(e.EventObject),a.animationState=this,this._armature._bufferEvent(a,e.EventObject.FADE_OUT_COMPLETE))):(this._isPausePlayhead=
!1,a.hasEvent(e.EventObject.FADE_IN_COMPLETE)&&(a=e.BaseObject.borrowObject(e.EventObject),a.animationState=this,this._armature._bufferEvent(a,e.EventObject.FADE_IN_COMPLETE)))))};a.prototype._isDisabled=function(b){return!this.displayControl||b.displayController&&b.displayController!=this._name&&b.displayController!=this._group?!0:!1};a.prototype._fadeIn=function(b,f,d,k,c,g,n,m,h,q){this._armature=b;this._animationData=f;this._name=d;this.actionEnabled=a.stateActionEnabled;this.playTimes=k;this.timeScale=
m;this.fadeTotalTime=h;this._position=c;this._duration=g;this._time=n;this._isPausePlayhead=q;0==this.fadeTotalTime&&(this._fadeProgress=.999999);this._timeline=e.BaseObject.borrowObject(e.AnimationTimelineState);this._timeline.fadeIn(this._armature,this,this._animationData,this._time);this._updateTimelineStates()};a.prototype._updateTimelineStates=function(){var b=this._time;this._animationData.hasAsynchronyTimeline||(b=this._timeline._currentTime);for(var a={},d={},k=0,c=this._boneTimelines.length;k<
c;++k){var g=this._boneTimelines[k];a[g.bone.name]=g}var n=this._armature.getBones();k=0;for(c=n.length;k<c;++k){var m=n[k];var h=m.name;var q=this._animationData.getBoneTimeline(h);q&&this.containsBoneMask(h)&&((g=a[h])?delete a[h]:(g=e.BaseObject.borrowObject(e.BoneTimelineState),g.bone=m,g.fadeIn(this._armature,this,q,b),this._boneTimelines.push(g)))}for(k in a)g=a[k],g.bone.invalidUpdate(),this._boneTimelines.splice(this._boneTimelines.indexOf(g),1),g.returnToPool();k=0;for(c=this._slotTimelines.length;k<
c;++k)n=this._slotTimelines[k],d[n.slot.name]=n;g=this._armature.getSlots();k=0;for(c=g.length;k<c;++k)m=g[k],h=m.name,n=m.parent.name,(a=this._animationData.getSlotTimeline(h))&&this.containsBoneMask(n)&&!this._isFadeOut&&((n=d[h])?delete d[h]:(n=e.BaseObject.borrowObject(e.SlotTimelineState),n.slot=m,n.fadeIn(this._armature,this,a,b),this._slotTimelines.push(n)));for(k in d)n=d[k],this._slotTimelines.splice(this._slotTimelines.indexOf(n),1),n.returnToPool();this._updateFFDTimelineStates()};a.prototype._updateFFDTimelineStates=
function(){var b=this._time;this._animationData.hasAsynchronyTimeline||(b=this._timeline._currentTime);for(var a={},d=0,k=this._ffdTimelines.length;d<k;++d){var c=this._ffdTimelines[d];a[c.slot.name]=c}for(var g=this._armature.getSlots(),d=0,k=g.length;d<k;++d){var n=g[d];var m=n.name;c=n.parent.name;if(n._meshData){var h=n.displayIndex;if(n._meshData==(h<n._displayDataSet.displays.length?n._displayDataSet.displays[h].mesh:null))if((h=this._animationData.getFFDTimeline(this._armature._skinData.name,
m,h))&&this.containsBoneMask(c))(c=a[m])&&c._timeline==h?delete a[m]:(c=e.BaseObject.borrowObject(e.FFDTimelineState),c.slot=n,c.fadeIn(this._armature,this,h,b),this._ffdTimelines.push(c));else{m=0;for(c=n._ffdVertices.length;m<c;++m)n._ffdVertices[m]=0;n._ffdDirty=!0}}}for(d in a)c=a[d],this._ffdTimelines.splice(this._ffdTimelines.indexOf(c),1),c.returnToPool()};a.prototype._advanceTime=function(b,a,d){this._advanceFadeTime(b);b*=this.timeScale;0!=b&&this._isPlaying&&!this._isPausePlayhead&&(this._time+=
b);this._weightResult=this.weight*this._fadeProgress*a;if(0!=this._weightResult){var f=1<=this._fadeProgress&&0==d&&0<this._armature.cacheFrameRate,c=this._animationData.cacheTimeToFrameScale;a=b=!0;d=2*c;d=f?Math.floor(this._time*d)/d:this._time;this._timeline.update(d);this._animationData.hasAsynchronyTimeline||(d=this._timeline._currentTime);if(f)if(f=Math.floor(this._timeline._currentTime*c),this._armature._cacheFrameIndex==f)a=b=!1;else{this._armature._cacheFrameIndex=f;if(this._armature._animation._animationStateDirty){this._armature._animation._animationStateDirty=
!1;for(var c=0,e=this._boneTimelines.length;c<e;++c){var n=this._boneTimelines[c];n.bone._cacheFrames=n._timeline.cachedFrames}c=0;for(e=this._slotTimelines.length;c<e;++c)n=this._slotTimelines[c],n.slot._cacheFrames=n._timeline.cachedFrames}this._animationData.cachedFrames[f]?a=!1:this._animationData.cachedFrames[f]=!0}else this._armature._cacheFrameIndex=-1;if(b){if(a)for(c=0,e=this._boneTimelines.length;c<e;++c)this._boneTimelines[c].update(d);c=0;for(e=this._slotTimelines.length;c<e;++c)this._slotTimelines[c].update(d);
c=0;for(e=this._ffdTimelines.length;c<e;++c)this._ffdTimelines[c].update(d)}}0<=this.autoFadeOutTime&&1<=this._fadeProgress&&this._timeline._isCompleted&&this.fadeOut(this.autoFadeOutTime)};a.prototype.play=function(){this._isPlaying=!0};a.prototype.stop=function(){this._isPlaying=!1};a.prototype.fadeOut=function(b,a){void 0===a&&(a=!0);if(0>b||b!=b)b=0;this._isPausePlayhead=a;if(this._isFadeOut){if(b>b-this._fadeTime)return}else{this._isFadeOut=!0;if(0==b||0>=this._fadeProgress)this._fadeProgress=
1E-6;for(var f=0,k=this._boneTimelines.length;f<k;++f)this._boneTimelines[f].fadeOut();f=0;for(k=this._slotTimelines.length;f<k;++f)this._slotTimelines[f].fadeOut()}this.displayControl=!1;this.fadeTotalTime=1E-6<this._fadeProgress?b/this._fadeProgress:0;this._fadeTime=this.fadeTotalTime*(1-this._fadeProgress)};a.prototype.containsBoneMask=function(b){return!this._boneMask.length||0<=this._boneMask.indexOf(b)};a.prototype.addBoneMask=function(b,a){void 0===a&&(a=!0);var f=this._armature.getBone(b);
if(f){0>this._boneMask.indexOf(b)&&this._animationData.getBoneTimeline(b)&&this._boneMask.push(b);if(a)for(var k=this._armature.getBones(),c=0,e=k.length;c<e;++c){var n=k[c],m=n.name;0>this._boneMask.indexOf(m)&&this._animationData.getBoneTimeline(m)&&f.contains(n)&&this._boneMask.push(m)}this._updateTimelineStates()}};a.prototype.removeBoneMask=function(b,a){void 0===a&&(a=!0);var f=this._boneMask.indexOf(b);0<=f&&this._boneMask.splice(f,1);if(a&&(f=this._armature.getBone(b)))for(var k=this._armature.getBones(),
c=0,e=k.length;c<e;++c){var n=k[c],m=this._boneMask.indexOf(n.name);0<=m&&f.contains(n)&&this._boneMask.splice(m,1)}this._updateTimelineStates()};a.prototype.removeAllBoneMask=function(){this._boneMask.length=0;this._updateTimelineStates()};Object.defineProperty(a.prototype,"layer",{get:function(){return this._layer},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"group",{get:function(){return this._group},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"name",
{get:function(){return this._name},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"animationData",{get:function(){return this._animationData},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"isCompleted",{get:function(){return this._timeline._isCompleted},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"isPlaying",{get:function(){return this._isPlaying&&!this._timeline._isCompleted},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,
"currentPlayTimes",{get:function(){return this._timeline._currentPlayTimes},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"totalTime",{get:function(){return this._duration},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"currentTime",{get:function(){return this._timeline._currentTime},set:function(b){if(0>b||b!=b)b=0;b=b%this._duration+(this._timeline._currentPlayTimes-(this._timeline._isCompleted?1:0))*this._duration;if(this._time!=b){this._time=b;this._timeline.setCurrentTime(this._time);
b=0;for(var a=this._boneTimelines.length;b<a;++b)this._boneTimelines[b]._isCompleted=!1;b=0;for(a=this._slotTimelines.length;b<a;++b)this._slotTimelines[b]._isCompleted=!1;b=0;for(a=this._ffdTimelines.length;b<a;++b)this._ffdTimelines[b]._isCompleted=!1}},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"clip",{get:function(){return this._animationData},enumerable:!0,configurable:!0});a.stateActionEnabled=!0;return a}(e.BaseObject);e.AnimationState=h})(dragonBones||(dragonBones={}));
(function(e){var h=function(c){function a(){c.call(this)}__extends(a,c);a.toString=function(){return"[class dragonBones.AnimationTimelineState]"};a.prototype._onClear=function(){c.prototype._onClear.call(this);this._isStarted=!1};a.prototype._onCrossFrame=function(b){if(this._animationState.actionEnabled)for(var a=b.actions,d=0,k=a.length;d<k;++d)this._armature._bufferAction(a[d]);for(var a=this._armature._display,c=b.events,d=0,k=c.length;d<k;++d){var g=c[d],n="";switch(g.type){case 10:n=e.EventObject.FRAME_EVENT;
break;case 11:n=e.EventObject.SOUND_EVENT}if((11==g.type?this._armature._eventManager:a).hasEvent(n)){var m=e.BaseObject.borrowObject(e.EventObject);m.animationState=this._animationState;m.frame=b;g.bone&&(m.bone=this._armature.getBone(g.bone.name));g.slot&&(m.slot=this._armature.getSlot(g.slot.name));m.name=g.name;m.data=g.data;this._armature._bufferEvent(m,n)}}};a.prototype.fadeIn=function(b,a,d,k){c.prototype.fadeIn.call(this,b,a,d,k);this._currentTime=k};a.prototype.update=function(b){var a=this._currentTime,
d=this._currentPlayTimes;if(!this._isCompleted&&this._setCurrentTime(b)){b=this._armature._display;if(!this._isStarted&&(this._isStarted=!0,b.hasEvent(e.EventObject.START))){var k=e.BaseObject.borrowObject(e.EventObject);k.animationState=this._animationState;this._armature._bufferEvent(k,e.EventObject.START)}if(this._keyFrameCount&&(k=this._timeline.frames[1<this._keyFrameCount?Math.floor(this._currentTime*this._frameRate):0],this._currentFrame!=k))if(1<this._keyFrameCount){var c=this._currentFrame;
this._currentFrame=k;c||(c=this._timeline.frames[Math.floor(a*this._frameRate)],!this._isReverse&&(a<=c.position||d!=this._currentPlayTimes)&&(c=c.prev));if(this._isReverse)for(;c!=k;)this._onCrossFrame(c),c=c.prev;else for(;c!=k;)c=c.next,this._onCrossFrame(c)}else this._currentFrame=k,this._onCrossFrame(this._currentFrame);d!=this._currentPlayTimes&&(b.hasEvent(e.EventObject.LOOP_COMPLETE)&&(k=e.BaseObject.borrowObject(e.EventObject),k.animationState=this._animationState,this._armature._bufferEvent(k,
e.EventObject.LOOP_COMPLETE)),this._isCompleted&&b.hasEvent(e.EventObject.COMPLETE)&&(k=e.BaseObject.borrowObject(e.EventObject),k.animationState=this._animationState,this._armature._bufferEvent(k,e.EventObject.COMPLETE)),this._currentFrame=null)}};a.prototype.setCurrentTime=function(b){this._setCurrentTime(b);this._currentFrame=null};return a}(e.TimelineState);e.AnimationTimelineState=h;h=function(c){function a(){c.call(this);this._transform=new e.Transform;this._currentTransform=new e.Transform;
this._durationTransform=new e.Transform}__extends(a,c);a.toString=function(){return"[class dragonBones.BoneTimelineState]"};a.prototype._onClear=function(){c.prototype._onClear.call(this);this.bone=null;this._tweenScale=this._tweenRotate=this._tweenTransform=0;this._originTransform=this._boneTransform=null;this._transform.identity();this._currentTransform.identity();this._durationTransform.identity()};a.prototype._onArriveAtFrame=function(b){c.prototype._onArriveAtFrame.call(this,b);this._currentTransform.copyFrom(this._currentFrame.transform);
this._tweenScale=this._tweenRotate=this._tweenTransform=1;if(1<this._keyFrameCount&&(this._tweenEasing!=e.DragonBones.NO_TWEEN||this._curve)){b=this._currentFrame.next.transform;this._durationTransform.x=b.x-this._currentTransform.x;this._durationTransform.y=b.y-this._currentTransform.y;if(0!=this._durationTransform.x||0!=this._durationTransform.y)this._tweenTransform=2;var a=this._currentFrame.tweenRotate;if(a==a){if(a){if(0<a?b.skewY>=this._currentTransform.skewY:b.skewY<=this._currentTransform.skewY)a=
0<a?a-1:a+1;this._durationTransform.skewX=b.skewX-this._currentTransform.skewX+e.DragonBones.PI_D*a;this._durationTransform.skewY=b.skewY-this._currentTransform.skewY+e.DragonBones.PI_D*a}else this._durationTransform.skewX=e.Transform.normalizeRadian(b.skewX-this._currentTransform.skewX),this._durationTransform.skewY=e.Transform.normalizeRadian(b.skewY-this._currentTransform.skewY);if(0!=this._durationTransform.skewX||0!=this._durationTransform.skewY)this._tweenRotate=2}else this._durationTransform.skewX=
0,this._durationTransform.skewY=0;if(this._currentFrame.tweenScale){if(this._durationTransform.scaleX=b.scaleX-this._currentTransform.scaleX,this._durationTransform.scaleY=b.scaleY-this._currentTransform.scaleY,0!=this._durationTransform.scaleX||0!=this._durationTransform.scaleY)this._tweenScale=2}else this._durationTransform.scaleX=0,this._durationTransform.scaleY=0}else this._durationTransform.x=0,this._durationTransform.y=0,this._durationTransform.skewX=0,this._durationTransform.skewY=0,this._durationTransform.scaleX=
0,this._durationTransform.scaleY=0};a.prototype._onUpdateFrame=function(b){if(this._tweenTransform||this._tweenRotate||this._tweenScale)c.prototype._onUpdateFrame.call(this,b),this._tweenTransform&&(b=1==this._tweenTransform?this._tweenTransform=0:this._tweenProgress,this._animationState.additiveBlending?(this._transform.x=this._currentTransform.x+this._durationTransform.x*b,this._transform.y=this._currentTransform.y+this._durationTransform.y*b):(this._transform.x=this._originTransform.x+this._currentTransform.x+
this._durationTransform.x*b,this._transform.y=this._originTransform.y+this._currentTransform.y+this._durationTransform.y*b)),this._tweenRotate&&(b=1==this._tweenRotate?this._tweenRotate=0:this._tweenProgress,this._animationState.additiveBlending?(this._transform.skewX=this._currentTransform.skewX+this._durationTransform.skewX*b,this._transform.skewY=this._currentTransform.skewY+this._durationTransform.skewY*b):(this._transform.skewX=this._originTransform.skewX+this._currentTransform.skewX+this._durationTransform.skewX*
b,this._transform.skewY=this._originTransform.skewY+this._currentTransform.skewY+this._durationTransform.skewY*b)),this._tweenScale&&(b=1==this._tweenScale?this._tweenScale=0:this._tweenProgress,this._animationState.additiveBlending?(this._transform.scaleX=this._currentTransform.scaleX+this._durationTransform.scaleX*b,this._transform.scaleY=this._currentTransform.scaleY+this._durationTransform.scaleY*b):(this._transform.scaleX=this._originTransform.scaleX*(this._currentTransform.scaleX+this._durationTransform.scaleX*
b),this._transform.scaleY=this._originTransform.scaleY*(this._currentTransform.scaleY+this._durationTransform.scaleY*b))),this.bone.invalidUpdate()};a.prototype.fadeIn=function(b,a,d,k){c.prototype.fadeIn.call(this,b,a,d,k);this._originTransform=this._timeline.originTransform;this._boneTransform=this.bone._animationPose};a.prototype.fadeOut=function(){this._transform.skewX=e.Transform.normalizeRadian(this._transform.skewX);this._transform.skewY=e.Transform.normalizeRadian(this._transform.skewY)};
a.prototype.update=function(b){c.prototype.update.call(this,b);b=this._animationState._weightResult;0<b&&(0==this.bone._blendIndex?(this._boneTransform.x=this._transform.x*b,this._boneTransform.y=this._transform.y*b,this._boneTransform.skewX=this._transform.skewX*b,this._boneTransform.skewY=this._transform.skewY*b,this._boneTransform.scaleX=(this._transform.scaleX-1)*b+1,this._boneTransform.scaleY=(this._transform.scaleY-1)*b+1):(this._boneTransform.x+=this._transform.x*b,this._boneTransform.y+=this._transform.y*
b,this._boneTransform.skewX+=this._transform.skewX*b,this._boneTransform.skewY+=this._transform.skewY*b,this._boneTransform.scaleX+=(this._transform.scaleX-1)*b,this._boneTransform.scaleY+=(this._transform.scaleY-1)*b),this.bone._blendIndex++,1>this._animationState._fadeProgress&&this.bone.invalidUpdate())};return a}(e.TweenTimelineState);e.BoneTimelineState=h;h=function(c){function a(){c.call(this);this._color=new e.ColorTransform;this._durationColor=new e.ColorTransform}__extends(a,c);a.toString=
function(){return"[class dragonBones.SlotTimelineState]"};a.prototype._onClear=function(){c.prototype._onClear.call(this);this.slot=null;this._colorDirty=!1;this._tweenColor=0;this._slotColor=null;this._color.identity();this._durationColor.identity()};a.prototype._onArriveAtFrame=function(b){c.prototype._onArriveAtFrame.call(this,b);if(this._animationState._isDisabled(this.slot))this._tweenEasing=e.DragonBones.NO_TWEEN,this._curve=null,this._tweenColor=0;else if(this.slot._displayDataSet&&(b=this._currentFrame.displayIndex,
0<=this.slot.displayIndex&&0<=b?1<this.slot._displayDataSet.displays.length&&this.slot._setDisplayIndex(b):this.slot._setDisplayIndex(b),this.slot._updateMeshData(!0)),0<=this._currentFrame.displayIndex){this._tweenColor=0;b=this._currentFrame.color;if(1<this._keyFrameCount&&(this._tweenEasing!=e.DragonBones.NO_TWEEN||this._curve)){var a=this._currentFrame.next,d=a.color;b!=d&&0<=a.displayIndex&&(this._durationColor.alphaMultiplier=d.alphaMultiplier-b.alphaMultiplier,this._durationColor.redMultiplier=
d.redMultiplier-b.redMultiplier,this._durationColor.greenMultiplier=d.greenMultiplier-b.greenMultiplier,this._durationColor.blueMultiplier=d.blueMultiplier-b.blueMultiplier,this._durationColor.alphaOffset=d.alphaOffset-b.alphaOffset,this._durationColor.redOffset=d.redOffset-b.redOffset,this._durationColor.greenOffset=d.greenOffset-b.greenOffset,this._durationColor.blueOffset=d.blueOffset-b.blueOffset,0!=this._durationColor.alphaMultiplier||0!=this._durationColor.redMultiplier||0!=this._durationColor.greenMultiplier||
0!=this._durationColor.blueMultiplier||0!=this._durationColor.alphaOffset||0!=this._durationColor.redOffset||0!=this._durationColor.greenOffset||0!=this._durationColor.blueOffset)&&(this._tweenColor=2)}0!=this._tweenColor||this._slotColor.alphaMultiplier==b.alphaMultiplier&&this._slotColor.redMultiplier==b.redMultiplier&&this._slotColor.greenMultiplier==b.greenMultiplier&&this._slotColor.blueMultiplier==b.blueMultiplier&&this._slotColor.alphaOffset==b.alphaOffset&&this._slotColor.redOffset==b.redOffset&&
this._slotColor.greenOffset==b.greenOffset&&this._slotColor.blueOffset==b.blueOffset||(this._tweenColor=1)}else this._tweenEasing=e.DragonBones.NO_TWEEN,this._curve=null,this._tweenColor=0};a.prototype._onUpdateFrame=function(b){c.prototype._onUpdateFrame.call(this,b);if(this._tweenColor){b=1==this._tweenColor?this._tweenColor=0:this._tweenProgress;var a=this._currentFrame.color;this._color.alphaMultiplier=a.alphaMultiplier+this._durationColor.alphaMultiplier*b;this._color.redMultiplier=a.redMultiplier+
this._durationColor.redMultiplier*b;this._color.greenMultiplier=a.greenMultiplier+this._durationColor.greenMultiplier*b;this._color.blueMultiplier=a.blueMultiplier+this._durationColor.blueMultiplier*b;this._color.alphaOffset=a.alphaOffset+this._durationColor.alphaOffset*b;this._color.redOffset=a.redOffset+this._durationColor.redOffset*b;this._color.greenOffset=a.greenOffset+this._durationColor.greenOffset*b;this._color.blueOffset=a.blueOffset+this._durationColor.blueOffset*b;this._colorDirty=!0}};
a.prototype.fadeIn=function(b,a,d,k){c.prototype.fadeIn.call(this,b,a,d,k);this._slotColor=this.slot._colorTransform};a.prototype.fadeOut=function(){this._tweenColor=0};a.prototype.update=function(b){c.prototype.update.call(this,b);(0!=this._tweenColor||this._colorDirty)&&0<this._animationState._weightResult&&(b=this._animationState._fadeProgress,1>b?(this._slotColor.alphaMultiplier+=(this._color.alphaMultiplier-this._slotColor.alphaMultiplier)*b,this._slotColor.redMultiplier+=(this._color.redMultiplier-
this._slotColor.redMultiplier)*b,this._slotColor.greenMultiplier+=(this._color.greenMultiplier-this._slotColor.greenMultiplier)*b,this._slotColor.blueMultiplier+=(this._color.blueMultiplier-this._slotColor.blueMultiplier)*b,this._slotColor.alphaOffset+=(this._color.alphaOffset-this._slotColor.alphaOffset)*b,this._slotColor.redOffset+=(this._color.redOffset-this._slotColor.redOffset)*b,this._slotColor.greenOffset+=(this._color.greenOffset-this._slotColor.greenOffset)*b,this._slotColor.blueOffset+=
(this._color.blueOffset-this._slotColor.blueOffset)*b,this.slot._colorDirty=!0):this._colorDirty&&(this._colorDirty=!1,this._slotColor.alphaMultiplier=this._color.alphaMultiplier,this._slotColor.redMultiplier=this._color.redMultiplier,this._slotColor.greenMultiplier=this._color.greenMultiplier,this._slotColor.blueMultiplier=this._color.blueMultiplier,this._slotColor.alphaOffset=this._color.alphaOffset,this._slotColor.redOffset=this._color.redOffset,this._slotColor.greenOffset=this._color.greenOffset,
this._slotColor.blueOffset=this._color.blueOffset,this.slot._colorDirty=!0))};return a}(e.TweenTimelineState);e.SlotTimelineState=h;h=function(c){function a(){c.call(this);this._ffdVertices=[]}__extends(a,c);a.toString=function(){return"[class dragonBones.FFDTimelineState]"};a.prototype._onClear=function(){c.prototype._onClear.call(this);this.slot=null;this._tweenFFD=0;this._slotFFDVertices=null;this._durationFFDFrame&&(this._durationFFDFrame.returnToPool(),this._durationFFDFrame=null);this._ffdVertices.length&&
(this._ffdVertices.length=0)};a.prototype._onArriveAtFrame=function(b){c.prototype._onArriveAtFrame.call(this,b);this._tweenFFD=0;if(this._tweenEasing!=e.DragonBones.NO_TWEEN||this._curve)this._tweenFFD=this._updateExtensionKeyFrame(this._currentFrame,this._currentFrame.next,this._durationFFDFrame);if(0==this._tweenFFD){b=this._currentFrame.tweens;for(var a=0,d=b.length;a<d;++a)if(this._slotFFDVertices[a]!=b[a]){this._tweenFFD=1;break}}};a.prototype._onUpdateFrame=function(b){c.prototype._onUpdateFrame.call(this,
b);if(0!=this._tweenFFD){b=1==this._tweenFFD?this._tweenFFD=0:this._tweenProgress;for(var a=this._currentFrame.tweens,d=this._durationFFDFrame.tweens,k=0,e=a.length;k<e;++k)this._ffdVertices[k]=a[k]+d[k]*b;this.slot._ffdDirty=!0}};a.prototype.fadeIn=function(b,a,d,k){c.prototype.fadeIn.call(this,b,a,d,k);this._slotFFDVertices=this.slot._ffdVertices;this._durationFFDFrame=e.BaseObject.borrowObject(e.ExtensionFrameData);this._durationFFDFrame.tweens.length=this._slotFFDVertices.length;this._ffdVertices.length=
this._slotFFDVertices.length;b=0;for(a=this._durationFFDFrame.tweens.length;b<a;++b)this._durationFFDFrame.tweens[b]=0;b=0;for(a=this._ffdVertices.length;b<a;++b)this._ffdVertices[b]=0};a.prototype.update=function(b){c.prototype.update.call(this,b);b=this._animationState._weightResult;if(0<b){if(0==this.slot._blendIndex)for(var a=0,d=this._ffdVertices.length;a<d;++a)this._slotFFDVertices[a]=this._ffdVertices[a]*b;else for(a=0,d=this._ffdVertices.length;a<d;++a)this._slotFFDVertices[a]+=this._ffdVertices[a]*
b;this.slot._blendIndex++;1>this._animationState._fadeProgress&&(this.slot._ffdDirty=!0)}};return a}(e.TweenTimelineState);e.FFDTimelineState=h})(dragonBones||(dragonBones={}));
(function(e){var h=function(){function c(){this.time=(new Date).getTime()/e.DragonBones.SECOND_TO_MILLISECOND;this.timeScale=1;this._animatebles=[]}Object.defineProperty(c,"clock",{get:function(){c._clock||(c._clock=new c);return c._clock},enumerable:!0,configurable:!0});c.prototype.advanceTime=function(a){var b,f;a!=a&&(a=0);0>a&&(a=(new Date).getTime()/e.DragonBones.SECOND_TO_MILLISECOND-this.time);a*=this.timeScale;this.time=0>a?this.time-a:this.time+a;if(a){for(var d=b=0,k=this._animatebles.length;b<
k;++b)(f=this._animatebles[b])?(0<d&&(this._animatebles[b-d]=f,this._animatebles[b]=null),f.advanceTime(a)):d++;if(0<d){for(k=this._animatebles.length;b<k;++b)(f=this._animatebles[b])?this._animatebles[b-d]=f:d++;this._animatebles.length-=d}}};c.prototype.contains=function(a){return 0<=this._animatebles.indexOf(a)};c.prototype.add=function(a){a&&0>this._animatebles.indexOf(a)&&(this._animatebles.push(a),e.DragonBones.debug&&a instanceof e.Armature&&e.DragonBones.addArmature(a))};c.prototype.remove=
function(a){var b=this._animatebles.indexOf(a);0<=b&&(this._animatebles[b]=null,e.DragonBones.debug&&a instanceof e.Armature&&e.DragonBones.removeArmature(a))};c.prototype.clear=function(){for(var a=0,b=this._animatebles.length;a<b;++a)this._animatebles[a]=null};c._clock=null;return c}();e.WorldClock=h})(dragonBones||(dragonBones={}));
(function(e){var h=function(c){function a(){c.call(this);this.global=new e.Transform;this.origin=new e.Transform;this.offset=new e.Transform;this._globalTransformMatrix=new e.Matrix}__extends(a,c);a.prototype._onClear=function(){this.name=this.userData=null;this.globalTransformMatrix=this._globalTransformMatrix;this.global.identity();this.origin.identity();this.offset.identity();this._parent=this._armature=null;this._globalTransformMatrix.identity()};a.prototype._setArmature=function(b){this._armature=
b};a.prototype._setParent=function(b){this._parent=b};Object.defineProperty(a.prototype,"armature",{get:function(){return this._armature},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"parent",{get:function(){return this._parent},enumerable:!0,configurable:!0});return a}(e.BaseObject);e.TransformObject=h})(dragonBones||(dragonBones={}));
(function(e){var h=function(c){function a(){c.call(this);this._bones=[];this._slots=[];this._actions=[];this._events=[];this.enableCache=!1}__extends(a,c);a.toString=function(){return"[class dragonBones.Armature]"};a.prototype._onClear=function(){for(var b=0,a=this._bones.length;b<a;++b)this._bones[b].returnToPool();b=0;for(a=this._slots.length;b<a;++b)this._slots[b].returnToPool();b=0;for(a=this._events.length;b<a;++b)this._events[b].returnToPool();this.userData=null;this._bonesDirty=!1;this._cacheFrameIndex=
-1;this._skinData=this._armatureData=null;this._animation&&(this._animation.returnToPool(),this._animation=null);this._display&&(this._display._onClear(),this._display=null);this._eventManager=this._replacedTexture=this._parent=null;this._slotsDirty=this._lockDispose=this._delayDispose=!1;this._bones.length=0;this._slots.length=0;this._actions.length=0;this._events.length=0};a.prototype._sortBones=function(){var b=this._bones.length;if(!(0>=b)){var a=this._bones.concat(),d=0,k=0;for(this._bones.length=
0;k<b;){var c=a[d++];d>=b&&(d=0);0<=this._bones.indexOf(c)||c.parent&&0>this._bones.indexOf(c.parent)||c.ik&&0>this._bones.indexOf(c.ik)||(c.ik&&0<c.ikChain&&c.ikChainIndex==c.ikChain?this._bones.splice(this._bones.indexOf(c.parent)+1,0,c):this._bones.push(c),k++)}}};a.prototype._sortSlots=function(){};a.prototype._doAction=function(b){switch(b.type){case 0:this._animation.play(b.data[0],b.data[1]);break;case 1:this._animation.stop(b.data[0]);break;case 2:this._animation.gotoAndPlayByTime(b.data[0],
b.data[1],b.data[2]);break;case 3:this._animation.gotoAndStopByTime(b.data[0],b.data[1]);break;case 4:this._animation.fadeIn(b.data[0],b.data[1],b.data[2])}};a.prototype._addBoneToBoneList=function(b){0>this._bones.indexOf(b)&&(this._bonesDirty=!0,this._bones.push(b),this._animation._timelineStateDirty=!0)};a.prototype._removeBoneFromBoneList=function(b){b=this._bones.indexOf(b);0<=b&&(this._bones.splice(b,1),this._animation._timelineStateDirty=!0)};a.prototype._addSlotToSlotList=function(b){0>this._slots.indexOf(b)&&
(this._slotsDirty=!0,this._slots.push(b),this._animation._timelineStateDirty=!0)};a.prototype._removeSlotFromSlotList=function(b){b=this._slots.indexOf(b);0<=b&&(this._slots.splice(b,1),this._animation._timelineStateDirty=!0)};a.prototype._bufferAction=function(b){this._actions.push(b)};a.prototype._bufferEvent=function(b,a){b.type=a;b.armature=this;this._events.push(b)};a.prototype.dispose=function(){this._delayDispose=!0;!this._lockDispose&&this._animation&&this.returnToPool()};a.prototype.advanceTime=
function(b){var a;if(!this._animation)throw Error("The armature has been disposed.");var d=b*this._animation.timeScale;this._animation._advanceTime(d);this._bonesDirty&&(this._bonesDirty=!1,this._sortBones());this._slotsDirty&&(this._slotsDirty=!1,this._sortSlots());for(var c=0,l=this._bones.length;c<l;++c)this._bones[c]._update(this._cacheFrameIndex);c=0;for(l=this._slots.length;c<l;++c){var g=this._slots[c];g._update(this._cacheFrameIndex);(a=g._childArmature)&&(g.inheritAnimation?a.advanceTime(d):
a.advanceTime(b))}e.DragonBones.debugDraw&&this._display._debugDraw();if(!this._lockDispose){this._lockDispose=!0;if(0<this._events.length){c=0;for(l=this._events.length;c<l;++c)a=this._events[c],a.type==e.EventObject.SOUND_EVENT?this._eventManager._dispatchEvent(a):this._display._dispatchEvent(a),a.returnToPool();this._events.length=0}if(0<this._actions.length){c=0;for(l=this._actions.length;c<l;++c)if(b=this._actions[c],b.slot)(g=this.getSlot(b.slot.name))&&(a=g._childArmature)&&a._doAction(b);
else if(b.bone)for(g=0,d=this._slots.length;g<d;++g)(a=this._slots[g]._childArmature)&&a._doAction(b);else this._doAction(b);this._actions.length=0}this._lockDispose=!1}this._delayDispose&&this.returnToPool()};a.prototype.invalidUpdate=function(b,a){void 0===b&&(b=null);void 0===a&&(a=!1);if(b){var f=this.getBone(b);if(f&&(f.invalidUpdate(),a))for(var c=0,e=this._slots.length;c<e;++c){var g=this._slots[c];g.parent==f&&g.invalidUpdate()}}else{c=0;for(e=this._bones.length;c<e;++c)this._bones[c].invalidUpdate();
if(a)for(c=0,e=this._slots.length;c<e;++c)this._slots[c].invalidUpdate()}};a.prototype.getSlot=function(b){for(var a=0,d=this._slots.length;a<d;++a){var c=this._slots[a];if(c.name==b)return c}return null};a.prototype.getSlotByDisplay=function(b){if(b)for(var a=0,d=this._slots.length;a<d;++a){var c=this._slots[a];if(c.display==b)return c}return null};a.prototype.addSlot=function(b,a){var f=this.getBone(a);if(f)b._setArmature(this),b._setParent(f);else throw Error();};a.prototype.removeSlot=function(b){if(b&&
b.armature==this)b._setParent(null),b._setArmature(null);else throw Error();};a.prototype.getBone=function(b){for(var a=0,d=this._bones.length;a<d;++a){var c=this._bones[a];if(c.name==b)return c}return null};a.prototype.getBoneByDisplay=function(b){return(b=this.getSlotByDisplay(b))?b.parent:null};a.prototype.addBone=function(b,a){void 0===a&&(a=null);if(b)b._setArmature(this),b._setParent(a?this.getBone(a):null);else throw Error();};a.prototype.removeBone=function(b){if(b&&b.armature==this)b._setParent(null),
b._setArmature(null);else throw Error();};a.prototype.replaceTexture=function(b){this._replacedTexture=b;b=0;for(var a=this._slots.length;b<a;++b)this._slots[b].invalidUpdate()};a.prototype.getBones=function(){return this._bones};a.prototype.getSlots=function(){return this._slots};Object.defineProperty(a.prototype,"name",{get:function(){return this._armatureData?this._armatureData.name:null},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"armatureData",{get:function(){return this._armatureData},
enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"animation",{get:function(){return this._animation},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"display",{get:function(){return this._display},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"parent",{get:function(){return this._parent},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"cacheFrameRate",{get:function(){return this._armatureData.cacheFrameRate},set:function(b){if(this._armatureData.cacheFrameRate!=
b){this._armatureData.cacheFrames(b);for(var a=0,d=this._slots.length;a<d;++a){var c=this._slots[a].childArmature;c&&0==c.cacheFrameRate&&(c.cacheFrameRate=b)}}},enumerable:!0,configurable:!0});a.prototype.enableAnimationCache=function(b){this.cacheFrameRate=b};a.prototype.hasEventListener=function(b){this._display.hasEvent(b)};a.prototype.addEventListener=function(b,a,d){this._display.addEvent(b,a,d)};a.prototype.removeEventListener=function(b,a,d){this._display.removeEvent(b,a,d)};a.prototype.getDisplay=
function(){return this._display};return a}(e.BaseObject);e.Armature=h})(dragonBones||(dragonBones={}));
(function(e){var h=function(c){function a(){c.call(this);this._animationPose=new e.Transform;this._bones=[];this._slots=[]}__extends(a,c);a.toString=function(){return"[class dragonBones.Bone]"};a.prototype._onClear=function(){c.prototype._onClear.call(this);this.ikBendPositive=this.inheritScale=this.inheritRotation=this.inheritTranslation=!1;this.length=this.ikWeight=0;this._transformDirty=2;this._blendIndex=0;this._cacheFrames=null;this._animationPose.identity();this._visible=!0;this._ikChainIndex=
this._ikChain=0;this._ik=null;this._bones.length=0;this._slots.length=0};a.prototype._updateGlobalTransformMatrix=function(){if(this._parent){var b=this._parent.global.skewY,a=this._parent.globalTransformMatrix;if(this.inheritScale)this.inheritRotation||(this.global.skewX-=b,this.global.skewY-=b),this.global.toMatrix(this.globalTransformMatrix),this.globalTransformMatrix.concat(a),this.inheritTranslation||(this.globalTransformMatrix.tx=this.global.x,this.globalTransformMatrix.ty=this.global.y),this.global.fromMatrix(this.globalTransformMatrix);
else{if(this.inheritTranslation){var d=this.global.x,c=this.global.y;this.global.x=a.a*d+a.c*c+a.tx;this.global.y=a.d*c+a.b*d+a.ty}this.inheritRotation&&(this.global.skewX+=b,this.global.skewY+=b);this.global.toMatrix(this.globalTransformMatrix)}}else this.global.toMatrix(this.globalTransformMatrix)};a.prototype._computeIKA=function(){var b=this._ik.global,b=(Math.atan2(b.y-this.global.y,b.x-this.global.x)+this.offset.skewY-2*this.global.skewY+Math.atan2(this.globalTransformMatrix.b*this.length,this.globalTransformMatrix.a*
this.length))*this.ikWeight;this.global.skewX+=b;this.global.skewY+=b;this.global.toMatrix(this.globalTransformMatrix)};a.prototype._computeIKB=function(){var b=this._parent.global,a=this._ik.global,d=this.globalTransformMatrix.a*this.length,c=this.globalTransformMatrix.b*this.length,e=d*d+c*c,g=Math.sqrt(e),n=this.global.x-b.x,m=this.global.y-b.y,h=n*n+m*m,q=Math.sqrt(h),n=a.x-b.x,m=a.y-b.y,t=n*n+m*m,r=Math.sqrt(t);g+q<=r||r+g<=q||r+q<=g?(n=Math.atan2(a.y-b.y,a.x-b.x)+this._parent.offset.skewY,g+
q<=r||q<g&&(n+=Math.PI)):(g=(h-e+t)/(2*t),h=Math.sqrt(h-g*g*t)/r,r=b.x+n*g,g=b.y+m*g,m=-m*h,n*=h,this.ikBendPositive?(this.global.x=r-m,this.global.y=g-n):(this.global.x=r+m,this.global.y=g+n),n=Math.atan2(this.global.y-b.y,this.global.x-b.x)+this._parent.offset.skewY);n=(n-b.skewY)*this.ikWeight;b.skewX+=n;b.skewY+=n;b.toMatrix(this._parent.globalTransformMatrix);this._parent._transformDirty=1;this.global.x=b.x+Math.cos(b.skewY)*q;this.global.y=b.y+Math.sin(b.skewY)*q;b=(Math.atan2(a.y-this.global.y,
a.x-this.global.x)+this.offset.skewY-2*this.global.skewY+Math.atan2(c,d))*this.ikWeight;this.global.skewX+=b;this.global.skewY+=b;this.global.toMatrix(this.globalTransformMatrix)};a.prototype._setArmature=function(b){if(this._armature!=b){var a=this._ik=null,d=null;this._armature&&(a=this.getSlots(),d=this.getBones(),this._armature._removeBoneFromBoneList(this));(this._armature=b)&&this._armature._addBoneToBoneList(this);if(a){b=0;for(var c=a.length;b<c;++b){var e=a[b];e.parent==this&&e._setArmature(this._armature)}}if(d)for(b=
0,c=d.length;b<c;++b)a=d[b],a.parent==this&&a._setArmature(this._armature)}};a.prototype._setIK=function(b,a,d){if(b){if(a==d){var f=this._parent;a&&f?a=1:(d=a=0,f=this);if(f==b||f.contains(b))b=null,d=a=0;else for(var c=b;c.ik&&c.ikChain;){if(f.contains(c.ik)){b=null;d=a=0;break}c=c.parent}}}else d=a=0;this._ik=b;this._ikChain=a;this._ikChainIndex=d;this._armature&&(this._armature._bonesDirty=!0)};a.prototype._update=function(b){this._blendIndex=0;if(0<=b){var a=this._cacheFrames[b];this.globalTransformMatrix==
a?this._transformDirty=0:a?(this._transformDirty=2,this.globalTransformMatrix=a):2==this._transformDirty||this._parent&&0!=this._parent._transformDirty||this._ik&&0<this.ikWeight&&0!=this._ik._transformDirty?(this._transformDirty=2,this.globalTransformMatrix=this._globalTransformMatrix):this.globalTransformMatrix!=this._globalTransformMatrix?(this._transformDirty=0,this._cacheFrames[b]=this.globalTransformMatrix):(this._transformDirty=2,this.globalTransformMatrix=this._globalTransformMatrix)}else if(2==
this._transformDirty||this._parent&&0!=this._parent._transformDirty||this._ik&&0<this.ikWeight&&0!=this._ik._transformDirty)this._transformDirty=2,this.globalTransformMatrix=this._globalTransformMatrix;0!=this._transformDirty&&(2==this._transformDirty?(this._transformDirty=1,this.globalTransformMatrix==this._globalTransformMatrix&&(this.global.x=this.origin.x+this.offset.x+this._animationPose.x,this.global.y=this.origin.y+this.offset.y+this._animationPose.y,this.global.skewX=this.origin.skewX+this.offset.skewX+
this._animationPose.skewX,this.global.skewY=this.origin.skewY+this.offset.skewY+this._animationPose.skewY,this.global.scaleX=this.origin.scaleX*this.offset.scaleX*this._animationPose.scaleX,this.global.scaleY=this.origin.scaleY*this.offset.scaleY*this._animationPose.scaleY,this._updateGlobalTransformMatrix(),this._ik&&this._ikChainIndex==this._ikChain&&0<this.ikWeight&&(this.inheritTranslation&&0<this._ikChain&&this._parent?this._computeIKB():this._computeIKA()),0<=b&&!this._cacheFrames[b]&&(this.globalTransformMatrix=
e.BoneTimelineData.cacheFrame(this._cacheFrames,b,this._globalTransformMatrix)))):this._transformDirty=0)};a.prototype.invalidUpdate=function(){this._transformDirty=2};a.prototype.contains=function(b){if(b){if(b==this)return!1;for(;b!=this&&b;)b=b.parent;return b==this}return!1};a.prototype.getBones=function(){this._bones.length=0;for(var b=this._armature.getBones(),a=0,d=b.length;a<d;++a){var c=b[a];c.parent==this&&this._bones.push(c)}return this._bones};a.prototype.getSlots=function(){this._slots.length=
0;for(var b=this._armature.getSlots(),a=0,d=b.length;a<d;++a){var c=b[a];c.parent==this&&this._slots.push(c)}return this._slots};Object.defineProperty(a.prototype,"ikChain",{get:function(){return this._ikChain},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"ikChainIndex",{get:function(){return this._ikChainIndex},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"ik",{get:function(){return this._ik},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,
"visible",{get:function(){return this._visible},set:function(b){if(this._visible!=b){this._visible=b;b=this._armature.getSlots();for(var a=0,d=b.length;a<d;++a){var c=b[a];c._parent==this&&c._updateVisible()}}},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"slot",{get:function(){for(var b=this._armature.getSlots(),a=0,d=b.length;a<d;++a){var c=b[a];if(c.parent==this)return c}return null},enumerable:!0,configurable:!0});return a}(e.TransformObject);e.Bone=h})(dragonBones||(dragonBones=
{}));
(function(e){var h=function(c){function a(){c.call(this);this._colorTransform=new e.ColorTransform;this._ffdVertices=[];this._replacedDisplayDataSet=[];this._localMatrix=new e.Matrix;this._displayList=[];this._meshBones=[]}__extends(a,c);a.prototype._onClear=function(){c.prototype._onClear.call(this);for(var b=[],a=0,d=this._displayList.length;a<d;++a){var k=this._displayList[a];k!=this._rawDisplay&&k!=this._meshDisplay&&0>b.indexOf(k)&&b.push(k)}a=0;for(d=b.length;a<d;++a)k=b[a],k instanceof e.Armature?
k.dispose():this._disposeDisplay(k);this._meshDisplay&&this._meshDisplay!=this._rawDisplay&&this._disposeDisplay(this._meshDisplay);this._rawDisplay&&this._disposeDisplay(this._rawDisplay);this.inheritAnimation=!0;this.displayController=null;this._ffdDirty=this._colorDirty=!1;this._pivotY=this._pivotX=this._zOrder=this._blendIndex=0;this._cacheFrames=this._meshDisplay=this._rawDisplay=this._childArmature=this._meshData=this._displayDataSet=null;this._colorTransform.identity();this._ffdVertices.length=
0;this._replacedDisplayDataSet.length=0;this._transformDirty=this._originDirty=this._blendModeDirty=this._displayDirty=!1;this._blendMode=this._displayIndex=0;this._display=null;this._localMatrix.identity();this._displayList.length=0;this._meshBones.length=0};a.prototype._isMeshBonesUpdate=function(){for(var b=0,a=this._meshBones.length;b<a;++b)if(0!=this._meshBones[b]._transformDirty)return!0;return!1};a.prototype._updatePivot=function(b,a,d){this._pivotX=a.pivot.x;this._pivotY=a.pivot.y;if(a.isRelativePivot){var f=
this._armature.armatureData.scale,c=d.frame||d.region,e=c.width*f,f=c.height*f;d.rotated&&(e=c.height,f=c.width);this._pivotX*=e;this._pivotY*=f}d.frame&&(this._pivotX+=d.frame.x,this._pivotY+=d.frame.y);b&&b!=a&&(this._pivotX+=b.transform.x-a.transform.x,this._pivotY+=b.transform.y-a.transform.y)};a.prototype._updateDisplay=function(){var a=this._display||this._rawDisplay,f=this._childArmature;0<=this._displayIndex&&this._displayIndex<this._displayList.length?(this._display=this._displayList[this._displayIndex],
this._display instanceof e.Armature?(this._childArmature=this._display,this._display=this._childArmature._display):this._childArmature=null):this._childArmature=this._display=null;var d=this._display||this._rawDisplay;d!=a&&(this._onUpdateDisplay(),a?this._replaceDisplay(a):this._addDisplay(),this._colorDirty=this._blendModeDirty=!0);this._displayDataSet&&0<=this._displayIndex&&this._displayIndex<this._displayDataSet.displays.length&&(this.origin.copyFrom(this._displayDataSet.displays[this._displayIndex].transform),
this._originDirty=!0);this._updateMeshData(!1);d!=this._rawDisplay&&d!=this._meshDisplay||this._updateFrame();if(this._childArmature!=f&&(f&&(f._parent=null,this.inheritAnimation&&f.animation.reset()),this._childArmature&&(this._childArmature._parent=this,this.inheritAnimation)))if(0==this._childArmature.cacheFrameRate&&(a=this._armature.cacheFrameRate,0!=a&&(this._childArmature.cacheFrameRate=a)),a=this._armature.armatureData.getSlot(this.name),a=0<a.actions.length?a.actions:this._childArmature.armatureData.actions,
0<a.length)for(f=0,d=a.length;f<d;++f)this._childArmature._bufferAction(a[f]);else this._childArmature.animation.play()};a.prototype._updateLocalTransformMatrix=function(){this.global.copyFrom(this.origin).add(this.offset).toMatrix(this._localMatrix)};a.prototype._updateGlobalTransformMatrix=function(){this.globalTransformMatrix.copyFrom(this._localMatrix);this.globalTransformMatrix.concat(this._parent.globalTransformMatrix);this.global.fromMatrix(this.globalTransformMatrix)};a.prototype._setArmature=
function(a){this._armature!=a&&(this._armature&&this._armature._removeSlotFromSlotList(this),this._armature=a,this._onUpdateDisplay(),this._armature?(this._armature._addSlotToSlotList(this),this._addDisplay()):this._removeDisplay())};a.prototype._updateMeshData=function(a){var b=this._meshData,d=null;if(this._display&&this._display==this._meshDisplay&&0<=this._displayIndex){var d=this._displayDataSet&&this._displayIndex<this._displayDataSet.displays.length?this._displayDataSet.displays[this._displayIndex].mesh:
null,c=this._displayIndex<this._replacedDisplayDataSet.length?this._replacedDisplayDataSet[this._displayIndex]:null;this._meshData=(c?c.mesh:null)||d}else this._meshData=null;if(this._meshData!=b){if(this._meshData&&this._meshData==d){if(this._meshData.skinned){this._meshBones.length=this._meshData.bones.length;b=0;for(d=this._meshBones.length;b<d;++b)this._meshBones[b]=this._armature.getBone(this._meshData.bones[b].name);b=c=0;for(d=this._meshData.boneIndices.length;b<d;++b)c+=this._meshData.boneIndices[b].length;
this._ffdVertices.length=2*c}else this._meshBones.length=0,this._ffdVertices.length=this._meshData.vertices.length;b=0;for(d=this._ffdVertices.length;b<d;++b)this._ffdVertices[b]=0;this._ffdDirty=!0}else this._meshBones.length=0,this._ffdVertices.length=0;a&&this._armature.animation._updateFFDTimelineStates()}};a.prototype._update=function(a){this._blendIndex=0;this._displayDirty&&(this._displayDirty=!1,this._updateDisplay());if(this._display){this._blendModeDirty&&(this._blendModeDirty=!1,this._updateBlendMode());
this._colorDirty&&(this._colorDirty=!1,this._updateColor());if(this._meshData){if(this._ffdDirty||this._meshData.skinned&&this._isMeshBonesUpdate())this._ffdDirty=!1,this._updateMesh();if(this._meshData.skinned)return}this._originDirty&&(this._originDirty=!1,this._transformDirty=!0,this._updateLocalTransformMatrix());if(0<=a){var b=this._cacheFrames[a];this.globalTransformMatrix==b?this._transformDirty=!1:b?(this._transformDirty=!0,this.globalTransformMatrix=b):this._transformDirty||0!=this._parent._transformDirty?
(this._transformDirty=!0,this.globalTransformMatrix=this._globalTransformMatrix):this.globalTransformMatrix!=this._globalTransformMatrix?(this._transformDirty=!1,this._cacheFrames[a]=this.globalTransformMatrix):(this._transformDirty=!0,this.globalTransformMatrix=this._globalTransformMatrix)}else if(this._transformDirty||0!=this._parent._transformDirty)this._transformDirty=!0,this.globalTransformMatrix=this._globalTransformMatrix;this._transformDirty&&(this._transformDirty=!1,this.globalTransformMatrix==
this._globalTransformMatrix&&(this._updateGlobalTransformMatrix(),0<=a&&!this._cacheFrames[a]&&(this.globalTransformMatrix=e.SlotTimelineData.cacheFrame(this._cacheFrames,a,this._globalTransformMatrix))),this._updateTransform())}};a.prototype._setDisplayList=function(a){if(a&&0<a.length){this._displayList.length!=a.length&&(this._displayList.length=a.length);for(var b=0,d=a.length;b<d;++b){var c=a[b];c&&c!=this._rawDisplay&&c!=this._meshDisplay&&!(c instanceof e.Armature)&&0>this._displayList.indexOf(c)&&
this._initDisplay(c);this._displayList[b]=c}}else 0<this._displayList.length&&(this._displayList.length=0);return this._displayDirty=0<=this._displayIndex&&this._displayIndex<this._displayList.length?this._display!=this._displayList[this._displayIndex]:null!=this._display};a.prototype._setDisplayIndex=function(a){if(this._displayIndex==a)return!1;this._displayIndex=a;return this._displayDirty=!0};a.prototype._setBlendMode=function(a){if(this._blendMode==a)return!1;this._blendMode=a;return this._blendModeDirty=
!0};a.prototype._setColor=function(a){this._colorTransform.copyFrom(a);return this._colorDirty=!0};a.prototype.invalidUpdate=function(){this._displayDirty=!0};Object.defineProperty(a.prototype,"rawDisplay",{get:function(){return this._rawDisplay},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"MeshDisplay",{get:function(){return this._meshDisplay},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"displayIndex",{get:function(){return this._displayIndex},set:function(a){this._setDisplayIndex(a)&&
this._update(-1)},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"displayList",{get:function(){return this._displayList.concat()},set:function(a){var b=this._displayList.concat(),d=[];this._setDisplayList(a)&&this._update(-1);for(var c=0,l=b.length;c<l;++c)(a=b[c])&&a!=this._rawDisplay&&a!=this._meshDisplay&&0>this._displayList.indexOf(a)&&0>d.indexOf(a)&&d.push(a);c=0;for(l=d.length;c<l;++c)a=d[c],a instanceof e.Armature?a.dispose():this._disposeDisplay(a)},enumerable:!0,configurable:!0});
Object.defineProperty(a.prototype,"display",{get:function(){return this._display},set:function(a){if(this._display!=a){var b=this._displayList.length;0>this._displayIndex&&0==b&&(this._displayIndex=0);if(!(0>this._displayIndex)){var c=this.displayList;b<=this._displayIndex&&(c.length=this._displayIndex+1);c[this._displayIndex]=a;this.displayList=c}}},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"childArmature",{get:function(){return this._childArmature},set:function(a){this._childArmature!=
a&&(a&&a.display.advanceTimeBySelf(!1),this.display=a)},enumerable:!0,configurable:!0});a.prototype.getDisplay=function(){return this._display};a.prototype.setDisplay=function(a){this.display=a};return a}(e.TransformObject);e.Slot=h})(dragonBones||(dragonBones={}));
(function(e){var h=function(c){function a(){c.call(this)}__extends(a,c);a.toString=function(){return"[class dragonBones.EventObject]"};a.prototype._onClear=function(){this.userData=this.frame=this.animationState=this.slot=this.bone=this.armature=this.data=this.name=this.type=null};a.START="start";a.LOOP_COMPLETE="loopComplete";a.COMPLETE="complete";a.FADE_IN="fadeIn";a.FADE_IN_COMPLETE="fadeInComplete";a.FADE_OUT="fadeOut";a.FADE_OUT_COMPLETE="fadeOutComplete";a.FRAME_EVENT="frameEvent";a.SOUND_EVENT=
"soundEvent";return a}(e.BaseObject);e.EventObject=h})(dragonBones||(dragonBones={}));
(function(e){var h=function(){function c(a,b,f,c,k,e,g,n){void 0===a&&(a=1);void 0===b&&(b=1);void 0===f&&(f=1);void 0===c&&(c=1);void 0===k&&(k=0);void 0===e&&(e=0);void 0===g&&(g=0);void 0===n&&(n=0);this.alphaMultiplier=a;this.redMultiplier=b;this.greenMultiplier=f;this.blueMultiplier=c;this.alphaOffset=k;this.redOffset=e;this.greenOffset=g;this.blueOffset=n}c.prototype.copyFrom=function(a){this.alphaMultiplier=a.alphaMultiplier;this.redMultiplier=a.redMultiplier;this.greenMultiplier=a.greenMultiplier;
this.blueMultiplier=a.blueMultiplier;this.alphaOffset=a.alphaOffset;this.redOffset=this.redOffset=a.redOffset;this.greenOffset=a.blueOffset};c.prototype.identity=function(){this.alphaMultiplier=this.redMultiplier=this.greenMultiplier=this.blueMultiplier=1;this.alphaOffset=this.redOffset=this.greenOffset=this.blueOffset=0};return c}();e.ColorTransform=h})(dragonBones||(dragonBones={}));
(function(e){var h=function(){function c(a,b,f,c,k,e){void 0===a&&(a=1);void 0===b&&(b=0);void 0===f&&(f=0);void 0===c&&(c=1);void 0===k&&(k=0);void 0===e&&(e=0);this.a=a;this.b=b;this.c=f;this.d=c;this.tx=k;this.ty=e}c.prototype.copyFrom=function(a){this.a=a.a;this.b=a.b;this.c=a.c;this.d=a.d;this.tx=a.tx;this.ty=a.ty};c.prototype.identity=function(){this.a=this.d=1;this.tx=this.ty=this.b=this.c=0};c.prototype.concat=function(a){var b=this.a,c=this.b,d=this.c,k=this.d,e=this.tx,g=this.ty,n=a.a,h=
a.b,p=a.c,q=a.d,t=a.tx;a=a.ty;this.a=b*n+c*p;this.b=b*h+c*q;this.c=d*n+k*p;this.d=d*h+k*q;this.tx=n*e+p*g+t;this.ty=q*g+h*e+a};c.prototype.invert=function(){var a=this.a,b=this.b,c=this.c,d=this.d,k=this.tx,e=this.ty,g=a*d-b*c;this.a=d/g;this.b=-b/g;this.c=-c/g;this.d=a/g;this.tx=(c*e-d*k)/g;this.ty=-(a*e-b*k)/g};c.prototype.transformPoint=function(a,b,c,d){void 0===d&&(d=!1);c.x=this.a*a+this.c*b;c.y=this.b*a+this.d*b;d||(c.x+=this.tx,c.y+=this.ty)};return c}();e.Matrix=h})(dragonBones||(dragonBones=
{}));(function(e){var h=function(){function c(a,b){void 0===a&&(a=0);void 0===b&&(b=0);this.x=a;this.y=b}c.prototype.copyFrom=function(a){this.x=a.x;this.y=a.y};c.prototype.clear=function(){this.x=this.y=0};return c}();e.Point=h})(dragonBones||(dragonBones={}));
(function(e){var h=function(){function c(a,b,c,d){void 0===a&&(a=0);void 0===b&&(b=0);void 0===c&&(c=0);void 0===d&&(d=0);this.x=a;this.y=b;this.width=c;this.height=d}c.prototype.copyFrom=function(a){this.x=a.x;this.y=a.y;this.width=a.width;this.height=a.height};c.prototype.clear=function(){this.width=this.height=this.x=this.y=0};return c}();e.Rectangle=h})(dragonBones||(dragonBones={}));
(function(e){var h=function(){function c(a,b,c,d,k,e){void 0===a&&(a=0);void 0===b&&(b=0);void 0===c&&(c=0);void 0===d&&(d=0);void 0===k&&(k=1);void 0===e&&(e=1);this.x=a;this.y=b;this.skewX=c;this.skewY=d;this.scaleX=k;this.scaleY=e}c.normalizeRadian=function(a){a=(a+Math.PI)%(2*Math.PI);return a+=0<a?-Math.PI:Math.PI};c.prototype.toString=function(){return"[object dragonBones.Transform] x:"+this.x+" y:"+this.y+" skewX:"+180*this.skewX/Math.PI+" skewY:"+180*this.skewY/Math.PI+" scaleX:"+this.scaleX+
" scaleY:"+this.scaleY};c.prototype.copyFrom=function(a){this.x=a.x;this.y=a.y;this.skewX=a.skewX;this.skewY=a.skewY;this.scaleX=a.scaleX;this.scaleY=a.scaleY;return this};c.prototype.clone=function(){var a=new c;a.copyFrom(this);return a};c.prototype.identity=function(){this.x=this.y=this.skewX=this.skewY=0;this.scaleX=this.scaleY=1;return this};c.prototype.add=function(a){this.x+=a.x;this.y+=a.y;this.skewX+=a.skewX;this.skewY+=a.skewY;this.scaleX*=a.scaleX;this.scaleY*=a.scaleY;return this};c.prototype.minus=
function(a){this.x-=a.x;this.y-=a.y;this.skewX=c.normalizeRadian(this.skewX-a.skewX);this.skewY=c.normalizeRadian(this.skewY-a.skewY);this.scaleX/=a.scaleX;this.scaleY/=a.scaleY;return this};c.prototype.fromMatrix=function(a){var b=.25*Math.PI,c=this.scaleX,d=this.scaleY;this.x=a.tx;this.y=a.ty;this.skewX=Math.atan(-a.c/a.d);this.skewY=Math.atan(a.b/a.a);this.skewX!=this.skewX&&(this.skewX=0);this.skewY!=this.skewY&&(this.skewY=0);this.scaleY=this.skewX>-b&&this.skewX<b?a.d/Math.cos(this.skewX):-a.c/
Math.sin(this.skewX);this.scaleX=this.skewY>-b&&this.skewY<b?a.a/Math.cos(this.skewY):a.b/Math.sin(this.skewY);0<=c&&0>this.scaleX&&(this.scaleX=-this.scaleX,this.skewY-=Math.PI);0<=d&&0>this.scaleY&&(this.scaleY=-this.scaleY,this.skewX-=Math.PI);return this};c.prototype.toMatrix=function(a){a.a=this.scaleX*Math.cos(this.skewY);a.b=this.scaleX*Math.sin(this.skewY);a.c=-this.scaleY*Math.sin(this.skewX);a.d=this.scaleY*Math.cos(this.skewX);a.tx=this.x;a.ty=this.y;return this};Object.defineProperty(c.prototype,
"rotation",{get:function(){return this.skewY},set:function(a){a-=this.skewY;this.skewX+=a;this.skewY+=a},enumerable:!0,configurable:!0});return c}();e.Transform=h})(dragonBones||(dragonBones={}));
(function(e){var h=function(a){function b(){a.call(this);this.frames=[]}__extends(b,a);b.prototype._onClear=function(){for(var a=null,b=0,c=this.frames.length;b<c;++b){var e=this.frames[b];a&&e!=a&&a.returnToPool();a=e}this.scale=1;this.offset=0;this.frames.length=0};return b}(e.BaseObject);e.TimelineData=h;var c=function(a){function b(){a.call(this);this.originTransform=new e.Transform;this.cachedFrames=[]}__extends(b,a);b.cacheFrame=function(a,b,c){a=a[b]=new e.Matrix;a.copyFrom(c);return a};b.toString=
function(){return"[class dragonBones.BoneTimelineData]"};b.prototype._onClear=function(){a.prototype._onClear.call(this);this.bone=null;this.originTransform.identity();this.cachedFrames.length=0};b.prototype.cacheFrames=function(a){this.cachedFrames.length=0;this.cachedFrames.length=a};return b}(h);e.BoneTimelineData=c;c=function(a){function b(){a.call(this);this.cachedFrames=[]}__extends(b,a);b.cacheFrame=function(a,b,c){a=a[b]=new e.Matrix;a.copyFrom(c);return a};b.toString=function(){return"[class dragonBones.SlotTimelineData]"};
b.prototype._onClear=function(){a.prototype._onClear.call(this);this.slot=null;this.cachedFrames.length=0};b.prototype.cacheFrames=function(a){this.cachedFrames.length=0;this.cachedFrames.length=a};return b}(h);e.SlotTimelineData=c;h=function(a){function b(){a.call(this)}__extends(b,a);b.toString=function(){return"[class dragonBones.FFDTimelineData]"};b.prototype._onClear=function(){a.prototype._onClear.call(this);this.displayIndex=0;this.slot=this.skin=null};return b}(h);e.FFDTimelineData=h})(dragonBones||
(dragonBones={}));
(function(e){var h=function(c){function a(){c.call(this);this.boneTimelines={};this.slotTimelines={};this.ffdTimelines={};this.cachedFrames=[]}__extends(a,c);a.toString=function(){return"[class dragonBones.AnimationData]"};a.prototype._onClear=function(){c.prototype._onClear.call(this);for(var a in this.boneTimelines)this.boneTimelines[a].returnToPool(),delete this.boneTimelines[a];for(a in this.slotTimelines)this.slotTimelines[a].returnToPool(),delete this.slotTimelines[a];for(a in this.ffdTimelines){for(var f in this.ffdTimelines[a])for(var d in this.ffdTimelines[a][f])this.ffdTimelines[a][f][d].returnToPool();delete this.ffdTimelines[a]}this.hasAsynchronyTimeline=
!1;this.cacheTimeToFrameScale=this.fadeInTime=this.duration=this.position=this.playTimes=this.frameCount=0;this.animation=this.name=null;this.cachedFrames.length=0};a.prototype.cacheFrames=function(a){if(!this.animation){a=Math.max(Math.floor((this.frameCount+1)*this.scale*a),1);this.cacheTimeToFrameScale=a/(this.duration+1E-6);this.cachedFrames.length=0;this.cachedFrames.length=a;for(var b in this.boneTimelines)this.boneTimelines[b].cacheFrames(a);for(b in this.slotTimelines)this.slotTimelines[b].cacheFrames(a)}};
a.prototype.addBoneTimeline=function(a){if(a&&a.bone&&!this.boneTimelines[a.bone.name])this.boneTimelines[a.bone.name]=a;else throw Error();};a.prototype.addSlotTimeline=function(a){if(a&&a.slot&&!this.slotTimelines[a.slot.name])this.slotTimelines[a.slot.name]=a;else throw Error();};a.prototype.addFFDTimeline=function(a){if(a&&a.skin&&a.slot){var b=this.ffdTimelines[a.skin.name]=this.ffdTimelines[a.skin.name]||{},b=b[a.slot.slot.name]=b[a.slot.slot.name]||{};if(b[a.displayIndex])throw Error();b[a.displayIndex]=
a}else throw Error();};a.prototype.getBoneTimeline=function(a){return this.boneTimelines[a]};a.prototype.getSlotTimeline=function(a){return this.slotTimelines[a]};a.prototype.getFFDTimeline=function(a,c,d){if(a=this.ffdTimelines[a])if(c=a[c])return c[d];return null};return a}(e.TimelineData);e.AnimationData=h})(dragonBones||(dragonBones={}));
(function(e){var h=function(c){function a(){c.call(this);this.aabb=new e.Rectangle;this.bones={};this.slots={};this.skins={};this.animations={};this.actions=[];this._sortedBones=[];this._sortedSlots=[];this._bonesChildren={}}__extends(a,c);a._onSortSlots=function(a,c){return a.zOrder>c.zOrder?1:-1};a.toString=function(){return"[class dragonBones.ArmatureData]"};a.prototype._onClear=function(){for(var a in this.bones)this.bones[a].returnToPool(),delete this.bones[a];for(a in this.slots)this.slots[a].returnToPool(),
delete this.slots[a];for(a in this.skins)this.skins[a].returnToPool(),delete this.skins[a];for(a in this.animations)this.animations[a].returnToPool(),delete this.animations[a];a=0;for(var c=this.actions.length;a<c;++a)this.actions[a].returnToPool();this.type=this.frameRate=0;this.userData=this.parent=this.name=null;this.aabb.clear();this.cacheFrameRate=this.actions.length=0;this.scale=1;for(a in this._bonesChildren)delete this._bonesChildren[a];this._slotDirty=this._boneDirty=!1;this._defaultAnimation=
this._defaultSkin=null;this._sortedBones.length=0;this._sortedSlots.length=0};a.prototype._sortBones=function(){var a=this._sortedBones.length;if(!(1>a)){var c=this._sortedBones.concat(),d=0,e=0;for(this._sortedBones.length=0;e<a;){var l=c[d++];d>=a&&(d=0);0<=this._sortedBones.indexOf(l)||l.parent&&0>this._sortedBones.indexOf(l.parent)||l.ik&&0>this._sortedBones.indexOf(l.ik)||(l.ik&&0<l.chain&&l.chainIndex==l.chain?this._sortedBones.splice(this._sortedBones.indexOf(l.parent)+1,0,l):this._sortedBones.push(l),
e++)}}};a.prototype._sortSlots=function(){this._sortedSlots.sort(a._onSortSlots)};a.prototype.cacheFrames=function(a){if(this.cacheFrameRate!=a){this.cacheFrameRate=a;a=this.cacheFrameRate/this.frameRate;for(var b in this.animations)this.animations[b].cacheFrames(a)}};a.prototype.addBone=function(a,c){if(a&&a.name&&!this.bones[a.name]){if(c){var b=this.getBone(c);b?a.parent=b:(this._bonesChildren[c]=this._bonesChildren[c]||[]).push(a)}if(b=this._bonesChildren[a.name]){for(var f=0,e=b.length;f<e;++f)b[f].parent=
a;delete this._bonesChildren[a.name]}this.bones[a.name]=a;this._sortedBones.push(a);this._boneDirty=!0}else throw Error();};a.prototype.addSlot=function(a){if(a&&a.name&&!this.slots[a.name])this.slots[a.name]=a,this._sortedSlots.push(a),this._slotDirty=!0;else throw Error();};a.prototype.addSkin=function(a){if(a&&a.name&&!this.skins[a.name])this.skins[a.name]=a,this._defaultSkin||(this._defaultSkin=a);else throw Error();};a.prototype.addAnimation=function(a){if(a&&a.name&&!this.animations[a.name])this.animations[a.name]=
a,this._defaultAnimation||(this._defaultAnimation=a);else throw Error();};a.prototype.getBone=function(a){return this.bones[a]};a.prototype.getSlot=function(a){return this.slots[a]};a.prototype.getSkin=function(a){return a?this.skins[a]:this._defaultSkin};a.prototype.getAnimation=function(a){return a?this.animations[a]:this._defaultAnimation};Object.defineProperty(a.prototype,"sortedBones",{get:function(){this._boneDirty&&(this._boneDirty=!1,this._sortBones());return this._sortedBones},enumerable:!0,
configurable:!0});Object.defineProperty(a.prototype,"sortedSlots",{get:function(){this._slotDirty&&(this._slotDirty=!1,this._sortSlots());return this._sortedSlots},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"defaultSkin",{get:function(){return this._defaultSkin},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"defaultAnimation",{get:function(){return this._defaultAnimation},enumerable:!0,configurable:!0});return a}(e.BaseObject);e.ArmatureData=h;h=function(c){function a(){c.call(this);
this.transform=new e.Transform}__extends(a,c);a.toString=function(){return"[class dragonBones.BoneData]"};a.prototype._onClear=function(){this.bendPositive=this.inheritScale=this.inheritRotation=this.inheritTranslation=!1;this.length=this.weight=this.chainIndex=this.chain=0;this.ik=this.parent=this.name=null;this.transform.identity()};return a}(e.BaseObject);e.BoneData=h;h=function(c){function a(){c.call(this);this.actions=[]}__extends(a,c);a.generateColor=function(){return new e.ColorTransform};
a.toString=function(){return"[class dragonBones.SlotData]"};a.prototype._onClear=function(){for(var a=0,c=this.actions.length;a<c;++a)this.actions[a].returnToPool();this.blendMode=this.zOrder=this.displayIndex=0;this.color=this.parent=this.name=null;this.actions.length=0};a.DEFAULT_COLOR=new e.ColorTransform;return a}(e.BaseObject);e.SlotData=h;h=function(c){function a(){c.call(this);this.slots={}}__extends(a,c);a.toString=function(){return"[class dragonBones.SkinData]"};a.prototype._onClear=function(){for(var a in this.slots)this.slots[a].returnToPool(),
delete this.slots[a];this.name=null};a.prototype.addSlot=function(a){if(a&&a.slot&&!this.slots[a.slot.name])this.slots[a.slot.name]=a;else throw Error();};a.prototype.getSlot=function(a){return this.slots[a]};return a}(e.BaseObject);e.SkinData=h;h=function(c){function a(){c.call(this);this.displays=[]}__extends(a,c);a.toString=function(){return"[class dragonBones.SlotDisplayDataSet]"};a.prototype._onClear=function(){for(var a=0,c=this.displays.length;a<c;++a)this.displays[a].returnToPool();this.slot=
null;this.displays.length=0};return a}(e.BaseObject);e.SlotDisplayDataSet=h;h=function(c){function a(){c.call(this);this.pivot=new e.Point;this.transform=new e.Transform}__extends(a,c);a.toString=function(){return"[class dragonBones.DisplayData]"};a.prototype._onClear=function(){this.isRelativePivot=!1;this.type=0;this.armature=this.texture=this.name=null;this.mesh&&(this.mesh.returnToPool(),this.mesh=null);this.pivot.clear();this.transform.identity()};return a}(e.BaseObject);e.DisplayData=h;h=function(c){function a(){c.call(this);
this.slotPose=new e.Matrix;this.uvs=[];this.vertices=[];this.vertexIndices=[];this.boneIndices=[];this.weights=[];this.boneVertices=[];this.bones=[];this.inverseBindPose=[]}__extends(a,c);a.toString=function(){return"[class dragonBones.MeshData]"};a.prototype._onClear=function(){this.skinned=!1;this.slotPose.identity();this.uvs.length=0;this.vertices.length=0;this.vertexIndices.length=0;this.boneIndices.length=0;this.weights.length=0;this.boneVertices.length=0;this.bones.length=0;this.inverseBindPose.length=
0};return a}(e.BaseObject);e.MeshData=h})(dragonBones||(dragonBones={}));
(function(e){var h=function(c){function a(){c.call(this);this.armatures={};this._armatureNames=[]}__extends(a,c);a.toString=function(){return"[class dragonBones.DragonBonesData]"};a.prototype._onClear=function(){for(var a in this.armatures)this.armatures[a].returnToPool(),delete this.armatures[a];this.autoSearch=!1;this.frameRate=0;this.name=null;this._armatureNames.length=0};a.prototype.getArmature=function(a){return this.armatures[a]};a.prototype.addArmature=function(a){if(a&&a.name&&!this.armatures[a.name])this.armatures[a.name]=
a,this._armatureNames.push(a.name),a.parent=this;else throw Error();};Object.defineProperty(a.prototype,"armatureNames",{get:function(){return this._armatureNames},enumerable:!0,configurable:!0});a.prototype.dispose=function(){this.returnToPool()};return a}(e.BaseObject);e.DragonBonesData=h})(dragonBones||(dragonBones={}));
(function(e){var h=function(a){function b(){a.call(this);this.data=[]}__extends(b,a);b.toString=function(){return"[class dragonBones.ActionData]"};b.prototype._onClear=function(){this.type=0;this.slot=this.bone=null;this.data.length=0};return b}(e.BaseObject);e.ActionData=h;h=function(a){function b(){a.call(this)}__extends(b,a);b.toString=function(){return"[class dragonBones.EventData]"};b.prototype._onClear=function(){this.type=10;this.slot=this.bone=this.data=this.name=null};return b}(e.BaseObject);
e.EventData=h;var c=function(a){function b(){a.call(this)}__extends(b,a);b.prototype._onClear=function(){this.duration=this.position=0;this.next=this.prev=null};return b}(e.BaseObject);e.FrameData=c;h=function(a){function b(){a.call(this)}__extends(b,a);b.samplingCurve=function(a,b){if(0==a.length||0==b)return null;var c=b+2,d=1/c,f=Array(2*(c-1));a=a.concat();a.unshift(0,0);a.push(1,1);for(var e=0,h=0;h<c-1;++h){for(var p=d*(h+1);a[e+6]<p;)e+=6;var q=a[e],t=a[e+6],r=(p-q)/(t-q),u=1-r,v=u*u,w=r*r,
p=u*v,v=3*r*v,u=3*u*w,r=r*w;f[2*h]=p*q+v*a[e+2]+u*a[e+4]+r*t;f[2*h+1]=p*a[e+1]+v*a[e+3]+u*a[e+5]+r*a[e+7]}return f};b.prototype._onClear=function(){a.prototype._onClear.call(this);this.tweenEasing=0;this.curve=null};return b}(c);e.TweenFrameData=h;c=function(a){function b(){a.call(this);this.actions=[];this.events=[]}__extends(b,a);b.toString=function(){return"[class dragonBones.AnimationFrameData]"};b.prototype._onClear=function(){a.prototype._onClear.call(this);for(var b=0,c=this.actions.length;b<
c;++b)this.actions[b].returnToPool();b=0;for(c=this.events.length;b<c;++b)this.events[b].returnToPool();this.actions.length=0;this.events.length=0};return b}(c);e.AnimationFrameData=c;c=function(a){function b(){a.call(this);this.transform=new e.Transform}__extends(b,a);b.toString=function(){return"[class dragonBones.BoneFrameData]"};b.prototype._onClear=function(){a.prototype._onClear.call(this);this.tweenScale=!1;this.tweenRotate=0;this.transform.identity()};return b}(h);e.BoneFrameData=c;c=function(a){function b(){a.call(this)}
__extends(b,a);b.generateColor=function(){return new e.ColorTransform};b.toString=function(){return"[class dragonBones.SlotFrameData]"};b.prototype._onClear=function(){a.prototype._onClear.call(this);this.zOrder=this.displayIndex=0;this.color=null};b.DEFAULT_COLOR=new e.ColorTransform;return b}(h);e.SlotFrameData=c;h=function(a){function b(){a.call(this);this.tweens=[];this.keys=[]}__extends(b,a);b.toString=function(){return"[class dragonBones.ExtensionFrameData]"};b.prototype._onClear=function(){a.prototype._onClear.call(this);
this.type=0;this.tweens.length=0;this.keys.length=0};return b}(h);e.ExtensionFrameData=h})(dragonBones||(dragonBones={}));
(function(e){var h=function(){function c(){this._timeline=this._animation=this._mesh=this._slotDisplayDataSet=this._skin=this._armature=this._data=null;this._isAutoTween=this._isGlobalTransform=this._isOldData=!1;this._animationTweenEasing=0;this._timelinePivot=new e.Point;this._helpPoint=new e.Point;this._helpTransformA=new e.Transform;this._helpTransformB=new e.Transform;this._helpMatrix=new e.Matrix;this._rawBones=[]}c._getArmatureType=function(a){switch(a.toLowerCase()){case "stage":return 0;
case "armature":return 0;case "movieclip":return 1;default:return 0}};c._getDisplayType=function(a){switch(a.toLowerCase()){case "image":return 0;case "armature":return 1;case "mesh":return 2;default:return 0}};c._getBlendMode=function(a){switch(a.toLowerCase()){case "normal":return 0;case "add":return 1;case "alpha":return 2;case "darken":return 3;case "difference":return 4;case "erase":return 5;case "hardlight":return 6;case "invert":return 7;case "layer":return 8;case "lighten":return 9;case "multiply":return 10;
case "overlay":return 11;case "screen":return 12;case "subtract":return 13;default:return 0}};c._getActionType=function(a){switch(a.toLowerCase()){case "play":return 0;case "stop":return 1;case "gotoandplay":return 2;case "gotoandstop":return 3;case "fadein":return 4;case "fadeout":return 5;default:return 4}};c.prototype._getTimelineFrameMatrix=function(a,b,c,d){a=Math.floor(c*a.frameCount/a.duration);if(1==b.frames.length||a>=b.frames.length)d.copyFrom(b.frames[0].transform);else{a=b.frames[a];var f=
0;a.tweenEasing!=e.DragonBones.NO_TWEEN?(f=(c-a.position)/a.duration,0!=a.tweenEasing&&(f=e.TweenTimelineState._getEasingValue(f,a.tweenEasing))):a.curve&&(f=(c-a.position)/a.duration,f=e.TweenTimelineState._getCurveEasingValue(f,a.curve));c=a.next;d.x=c.transform.x-a.transform.x;d.y=c.transform.y-a.transform.y;d.skewX=e.Transform.normalizeRadian(c.transform.skewX-a.transform.skewX);d.skewY=e.Transform.normalizeRadian(c.transform.skewY-a.transform.skewY);d.scaleX=c.transform.scaleX-a.transform.scaleX;
d.scaleY=c.transform.scaleY-a.transform.scaleY;d.x=a.transform.x+d.x*f;d.y=a.transform.y+d.y*f;d.skewX=a.transform.skewX+d.skewX*f;d.skewY=a.transform.skewY+d.skewY*f;d.scaleX=a.transform.scaleX+d.scaleX*f;d.scaleY=a.transform.scaleY+d.scaleY*f}d.add(b.originTransform)};c.prototype._globalToLocal=function(a){for(var b=[],c=a.sortedBones.concat().reverse(),d=0,e=c.length;d<e;++d){var l=c[d];l.parent&&(l.parent.transform.toMatrix(this._helpMatrix),this._helpMatrix.invert(),this._helpMatrix.transformPoint(l.transform.x,
l.transform.y,this._helpPoint),l.transform.x=this._helpPoint.x,l.transform.y=this._helpPoint.y,l.transform.rotation-=l.parent.transform.rotation);for(var g in a.animations){var n=a.animations[g],h=n.getBoneTimeline(l.name);if(h){var p=l.parent?n.getBoneTimeline(l.parent.name):null;this._helpTransformB.copyFrom(h.originTransform);for(var q=b.length=0,t=h.frames.length;q<t;++q){var r=h.frames[q];0<=b.indexOf(r)||(b.push(r),p?(this._getTimelineFrameMatrix(n,p,r.position,this._helpTransformA),r.transform.add(this._helpTransformB),
this._helpTransformA.toMatrix(this._helpMatrix),this._helpMatrix.invert(),this._helpMatrix.transformPoint(r.transform.x,r.transform.y,this._helpPoint),r.transform.x=this._helpPoint.x,r.transform.y=this._helpPoint.y,r.transform.rotation-=this._helpTransformA.rotation):r.transform.add(this._helpTransformB),r.transform.minus(l.transform),0==q?(h.originTransform.copyFrom(r.transform),r.transform.identity()):r.transform.minus(h.originTransform))}}}}};c.prototype._mergeFrameToAnimationTimeline=function(a,
b,c){var d=Math.floor(a*this._armature.frameRate);a=this._animation.frames;if(0==a.length){var f=e.BaseObject.borrowObject(e.AnimationFrameData);f.position=0;if(1<this._animation.frameCount){a.length=this._animation.frameCount+1;var l=e.BaseObject.borrowObject(e.AnimationFrameData);l.position=this._animation.frameCount/this._armature.frameRate;a[0]=f;a[this._animation.frameCount]=l}}var g=a[d];if(!g||0!=d&&a[d-1]!=g.prev)for(l=e.BaseObject.borrowObject(e.AnimationFrameData),l.position=d/this._armature.frameRate,
a[d]=l,d+=1,f=a.length;d<f;++d)g&&a[d]==g&&(a[d]=null);else l=g;if(b)for(d=0,f=b.length;d<f;++d)l.actions.push(b[d]);if(c)for(d=0,f=c.length;d<f;++d)l.events.push(c[d]);c=b=null;d=0;for(f=a.length;d<f;++d)(l=a[d])&&c!=l?(c=l,b&&(c.prev=b,b.next=c,b.duration=c.position-b.position),b=c):a[d]=b;c.duration=this._animation.duration-c.position;c=a[0];b.next=c;c.prev=b};c.parseDragonBonesData=function(a){return e.ObjectDataParser.getInstance().parseDragonBonesData(a)};c.parseTextureAtlasData=function(a,
b){void 0===b&&(b=1);for(var f={},d=a[c.SUB_TEXTURE],k=0,l=d.length;k<l;k++){var g=d[k],n=g[c.NAME],h=new e.Rectangle,p=null;h.x=g[c.X]/b;h.y=g[c.Y]/b;h.width=g[c.WIDTH]/b;h.height=g[c.HEIGHT]/b;c.FRAME_WIDTH in g&&(p=new e.Rectangle,p.x=g[c.FRAME_X]/b,p.y=g[c.FRAME_Y]/b,p.width=g[c.FRAME_WIDTH]/b,p.height=g[c.FRAME_HEIGHT]/b);f[n]={region:h,frame:p,rotated:!1}}return f};c.DATA_VERSION_2_3="2.3";c.DATA_VERSION_3_0="3.0";c.DATA_VERSION_4_0="4.0";c.DATA_VERSION="4.5";c.TEXTURE_ATLAS="TextureAtlas";
c.SUB_TEXTURE="SubTexture";c.FORMAT="format";c.IMAGE_PATH="imagePath";c.WIDTH="width";c.HEIGHT="height";c.ROTATED="rotated";c.FRAME_X="frameX";c.FRAME_Y="frameY";c.FRAME_WIDTH="frameWidth";c.FRAME_HEIGHT="frameHeight";c.DRADON_BONES="dragonBones";c.ARMATURE="armature";c.BONE="bone";c.IK="ik";c.SLOT="slot";c.SKIN="skin";c.DISPLAY="display";c.ANIMATION="animation";c.FFD="ffd";c.FRAME="frame";c.PIVOT="pivot";c.TRANSFORM="transform";c.AABB="aabb";c.COLOR="color";c.FILTER="filter";c.VERSION="version";
c.IS_GLOBAL="isGlobal";c.FRAME_RATE="frameRate";c.TYPE="type";c.NAME="name";c.PARENT="parent";c.LENGTH="length";c.DATA="data";c.DISPLAY_INDEX="displayIndex";c.Z_ORDER="z";c.BLEND_MODE="blendMode";c.INHERIT_TRANSLATION="inheritTranslation";c.INHERIT_ROTATION="inheritRotation";c.INHERIT_SCALE="inheritScale";c.TARGET="target";c.BEND_POSITIVE="bendPositive";c.CHAIN="chain";c.WEIGHT="weight";c.FADE_IN_TIME="fadeInTime";c.PLAY_TIMES="playTimes";c.SCALE="scale";c.OFFSET="offset";c.POSITION="position";c.DURATION=
"duration";c.TWEEN_EASING="tweenEasing";c.TWEEN_ROTATE="tweenRotate";c.TWEEN_SCALE="tweenScale";c.CURVE="curve";c.EVENT="event";c.SOUND="sound";c.ACTION="action";c.ACTIONS="actions";c.DEFAULT_ACTIONS="defaultActions";c.X="x";c.Y="y";c.SKEW_X="skX";c.SKEW_Y="skY";c.SCALE_X="scX";c.SCALE_Y="scY";c.ALPHA_OFFSET="aO";c.RED_OFFSET="rO";c.GREEN_OFFSET="gO";c.BLUE_OFFSET="bO";c.ALPHA_MULTIPLIER="aM";c.RED_MULTIPLIER="rM";c.GREEN_MULTIPLIER="gM";c.BLUE_MULTIPLIER="bM";c.UVS="uvs";c.VERTICES="vertices";c.TRIANGLES=
"triangles";c.WEIGHTS="weights";c.SLOT_POSE="slotPose";c.BONE_POSE="bonePose";c.TWEEN="tween";c.KEY="key";c.COLOR_TRANSFORM="colorTransform";c.TIMELINE="timeline";c.PIVOT_X="pX";c.PIVOT_Y="pY";c.LOOP="loop";c.AUTO_TWEEN="autoTween";c.HIDE="hide";c.RECTANGLE="rectangle";c.ELLIPSE="ellipse";return c}();e.DataParser=h})(dragonBones||(dragonBones={}));
(function(e){var h=function(c){function a(){c.call(this)}__extends(a,c);a._getBoolean=function(a,c,d){if(c in a){a=a[c];c=typeof a;if("boolean"==c)return a;if("string"==c)switch(a){case "0":case "NaN":case "":case "false":case "null":case "undefined":return!1;default:return!0}else return!!a}return d};a._getNumber=function(a,c,d){return c in a?(a=a[c],null==a||"NaN"==a?d:+a||0):d};a._getString=function(a,c,d){return c in a?String(a[c]):d};a._getParameter=function(a,c,d){return a.length>c?a[c]:d};a.prototype._parseArmature=
function(b,c){var d=e.BaseObject.borrowObject(e.ArmatureData);d.name=a._getString(b,a.NAME,null);d.frameRate=a._getNumber(b,a.FRAME_RATE,this._data.frameRate)||this._data.frameRate;d.scale=c;d.type=a.TYPE in b&&"string"==typeof b[a.TYPE]?a._getArmatureType(b[a.TYPE]):a._getNumber(b,a.TYPE,0);this._armature=d;this._rawBones.length=0;if(a.AABB in b){var f=b[a.AABB];d.aabb.x=a._getNumber(f,a.X,0);d.aabb.y=a._getNumber(f,a.Y,0);d.aabb.width=a._getNumber(f,a.WIDTH,0);d.aabb.height=a._getNumber(f,a.HEIGHT,
0)}if(a.BONE in b)for(var l=b[a.BONE],f=0,g=l.length;f<g;++f){var h=l[f],m=this._parseBone(h);d.addBone(m,a._getString(h,a.PARENT,null));this._rawBones.push(m)}if(a.IK in b)for(l=b[a.IK],f=0,g=l.length;f<g;++f)this._parseIK(l[f]);if(a.SLOT in b)for(l=b[a.SLOT],f=h=0,g=l.length;f<g;++f)d.addSlot(this._parseSlot(l[f],h++));if(a.SKIN in b)for(l=b[a.SKIN],f=0,g=l.length;f<g;++f)d.addSkin(this._parseSkin(l[f]));if(a.ANIMATION in b)for(l=b[a.ANIMATION],f=0,g=l.length;f<g;++f)d.addAnimation(this._parseAnimation(l[f]));
(a.ACTIONS in b||a.DEFAULT_ACTIONS in b)&&this._parseActionData(b,d.actions,null,null);this._isOldData&&this._isGlobalTransform&&this._globalToLocal(d);this._armature=null;this._rawBones.length=0;return d};a.prototype._parseBone=function(b){var c=e.BaseObject.borrowObject(e.BoneData);c.name=a._getString(b,a.NAME,null);c.inheritTranslation=a._getBoolean(b,a.INHERIT_TRANSLATION,!0);c.inheritRotation=a._getBoolean(b,a.INHERIT_ROTATION,!0);c.inheritScale=a._getBoolean(b,a.INHERIT_SCALE,!0);c.length=a._getNumber(b,
a.LENGTH,0)*this._armature.scale;a.TRANSFORM in b&&this._parseTransform(b[a.TRANSFORM],c.transform);this._isOldData&&(c.inheritScale=!1);return c};a.prototype._parseIK=function(b){var c=this._armature.getBone(a._getString(b,a.BONE in b?a.BONE:a.NAME,null));c&&(c.ik=this._armature.getBone(a._getString(b,a.TARGET,null)),c.bendPositive=a._getBoolean(b,a.BEND_POSITIVE,!0),c.chain=a._getNumber(b,a.CHAIN,0),c.weight=a._getNumber(b,a.WEIGHT,1),0<c.chain&&c.parent&&!c.parent.ik?(c.parent.ik=c.ik,c.parent.chainIndex=
0,c.parent.chain=0,c.chainIndex=1):(c.chain=0,c.chainIndex=0))};a.prototype._parseSlot=function(b,c){var d=e.BaseObject.borrowObject(e.SlotData);d.name=a._getString(b,a.NAME,null);d.parent=this._armature.getBone(a._getString(b,a.PARENT,null));d.displayIndex=a._getNumber(b,a.DISPLAY_INDEX,0);d.zOrder=a._getNumber(b,a.Z_ORDER,c);a.COLOR in b||a.COLOR_TRANSFORM in b?(d.color=e.SlotData.generateColor(),this._parseColorTransform(b[a.COLOR]||b[a.COLOR_TRANSFORM],d.color)):d.color=e.SlotData.DEFAULT_COLOR;
d.blendMode=a.BLEND_MODE in b&&"string"==typeof b[a.BLEND_MODE]?a._getBlendMode(b[a.BLEND_MODE]):a._getNumber(b,a.BLEND_MODE,0);(a.ACTIONS in b||a.DEFAULT_ACTIONS in b)&&this._parseActionData(b,d.actions,null,null);this._isOldData&&(a.COLOR_TRANSFORM in b?(d.color=e.SlotData.generateColor(),this._parseColorTransform(b[a.COLOR_TRANSFORM],d.color)):d.color=e.SlotData.DEFAULT_COLOR);return d};a.prototype._parseSkin=function(b){var c=e.BaseObject.borrowObject(e.SkinData);c.name=a._getString(b,a.NAME,
"__default")||"__default";if(a.SLOT in b){this._skin=c;b=b[a.SLOT];for(var d=0,k=0,l=b.length;k<l;++k)this._isOldData&&this._armature.addSlot(this._parseSlot(b[k],d++)),c.addSlot(this._parseSlotDisplaySet(b[k]));this._skin=null}return c};a.prototype._parseSlotDisplaySet=function(b){var c=e.BaseObject.borrowObject(e.SlotDisplayDataSet);c.slot=this._armature.getSlot(a._getString(b,a.NAME,null));if(a.DISPLAY in b){b=b[a.DISPLAY];var d=c.displays;this._slotDisplayDataSet=c;for(var k=0,l=b.length;k<l;++k)d.push(this._parseDisplay(b[k]));
this._slotDisplayDataSet=null}return c};a.prototype._parseDisplay=function(b){var c=e.BaseObject.borrowObject(e.DisplayData);c.name=a._getString(b,a.NAME,null);c.type=a.TYPE in b&&"string"==typeof b[a.TYPE]?a._getDisplayType(b[a.TYPE]):a._getNumber(b,a.TYPE,0);c.isRelativePivot=!0;if(a.PIVOT in b){var d=b[a.PIVOT];c.pivot.x=a._getNumber(d,a.X,0);c.pivot.y=a._getNumber(d,a.Y,0)}else this._isOldData?(d=b[a.TRANSFORM],c.isRelativePivot=!1,c.pivot.x=a._getNumber(d,a.PIVOT_X,0)*this._armature.scale,c.pivot.y=
a._getNumber(d,a.PIVOT_Y,0)*this._armature.scale):(c.pivot.x=.5,c.pivot.y=.5);a.TRANSFORM in b&&this._parseTransform(b[a.TRANSFORM],c.transform);switch(c.type){case 2:c.mesh=this._parseMesh(b)}return c};a.prototype._parseMesh=function(b){var c=e.BaseObject.borrowObject(e.MeshData),d=b[a.VERTICES],k=b[a.UVS],l=b[a.TRIANGLES],g=Math.floor(d.length/2),h=Math.floor(l.length/3),m=Array(this._armature.sortedBones.length);c.skinned=a.WEIGHTS in b&&0<b[a.WEIGHTS].length;c.uvs.length=2*g;c.vertices.length=
2*g;c.vertexIndices.length=3*h;if(c.skinned&&(c.boneIndices.length=g,c.weights.length=g,c.boneVertices.length=g,a.SLOT_POSE in b&&(g=b[a.SLOT_POSE],c.slotPose.a=g[0],c.slotPose.b=g[1],c.slotPose.c=g[2],c.slotPose.d=g[3],c.slotPose.tx=g[4],c.slotPose.ty=g[5]),a.BONE_POSE in b)){var p=b[a.BONE_POSE];g=0;for(h=p.length;g<h;g+=7){var q=p[g];var t=m[q]=new e.Matrix;t.a=p[g+1];t.b=p[g+2];t.c=p[g+3];t.d=p[g+4];t.tx=p[g+5];t.ty=p[g+6];t.invert()}}t=g=0;for(h=d.length;g<h;g+=2){q=g+1;var r=g/2,u=c.vertices[g]=
d[g]*this._armature.scale,v=c.vertices[q]=d[q]*this._armature.scale;c.uvs[g]=k[g];c.uvs[q]=k[q];if(c.skinned){p=b[a.WEIGHTS];var w=p[t],B=c.boneIndices[r]=Array(w),C=c.weights[r]=Array(w),r=c.boneVertices[r]=Array(2*w);c.slotPose.transformPoint(u,v,this._helpPoint);for(var u=c.vertices[g]=this._helpPoint.x,v=c.vertices[q]=this._helpPoint.y,x=0;x<w;++x){var z=t+1+2*x;q=p[z];var A=this._rawBones[q],y=c.bones.indexOf(A);0>y&&(y=c.bones.length,c.bones[y]=A,c.inverseBindPose[y]=m[q]);c.inverseBindPose[y].transformPoint(u,
v,this._helpPoint);B[x]=y;C[x]=p[z+1];r[2*x]=this._helpPoint.x;r[2*x+1]=this._helpPoint.y}t+=2*w+1}}g=0;for(h=l.length;g<h;++g)c.vertexIndices[g]=l[g];return c};a.prototype._parseAnimation=function(b){var c=e.BaseObject.borrowObject(e.AnimationData);c.name=a._getString(b,a.NAME,"__default")||"__default";c.frameCount=Math.max(a._getNumber(b,a.DURATION,1),1);c.position=a._getNumber(b,a.POSITION,0)/this._armature.frameRate;c.duration=c.frameCount/this._armature.frameRate;c.playTimes=a._getNumber(b,a.PLAY_TIMES,
1);c.fadeInTime=a._getNumber(b,a.FADE_IN_TIME,0);this._animation=c;var d=a._getString(b,a.ANIMATION,null);if(d)return c.animation=this._armature.getAnimation(d),c;this._parseTimeline(b,c,this._parseAnimationFrame);if(a.BONE in b)for(var k=b[a.BONE],l=0,d=k.length;l<d;++l)c.addBoneTimeline(this._parseBoneTimeline(k[l]));if(a.SLOT in b)for(k=b[a.SLOT],l=0,d=k.length;l<d;++l)c.addSlotTimeline(this._parseSlotTimeline(k[l]));if(a.FFD in b)for(k=b[a.FFD],l=0,d=k.length;l<d;++l)c.addFFDTimeline(this._parseFFDTimeline(k[l]));
if(this._isOldData){if(this._isAutoTween=a._getBoolean(b,a.AUTO_TWEEN,!0),this._animationTweenEasing=a._getNumber(b,a.TWEEN_EASING,0)||0,c.playTimes=a._getNumber(b,a.LOOP,1),a.TIMELINE in b){b=b[a.TIMELINE];l=0;for(d=b.length;l<d;++l)c.addBoneTimeline(this._parseBoneTimeline(b[l]));l=0;for(d=b.length;l<d;++l)c.addSlotTimeline(this._parseSlotTimeline(b[l]))}}else this._isAutoTween=!1,this._animationTweenEasing=0;for(l in this._armature.bones)b=this._armature.bones[l],c.getBoneTimeline(b.name)||(d=
e.BaseObject.borrowObject(e.BoneTimelineData),k=e.BaseObject.borrowObject(e.BoneFrameData),d.bone=b,d.frames[0]=k,c.addBoneTimeline(d));for(l in this._armature.slots)b=this._armature.slots[l],c.getSlotTimeline(b.name)||(d=e.BaseObject.borrowObject(e.SlotTimelineData),k=e.BaseObject.borrowObject(e.SlotFrameData),d.slot=b,k.displayIndex=b.displayIndex,b.color==e.SlotData.DEFAULT_COLOR?k.color=e.SlotFrameData.DEFAULT_COLOR:(k.color=e.SlotFrameData.generateColor(),k.color.copyFrom(b.color)),d.frames[0]=
k,c.addSlotTimeline(d),this._isOldData&&(k.displayIndex=-1));this._animation=null;return c};a.prototype._parseBoneTimeline=function(b){var c=e.BaseObject.borrowObject(e.BoneTimelineData);c.bone=this._armature.getBone(a._getString(b,a.NAME,null));this._parseTimeline(b,c,this._parseBoneFrame);for(var d=c.originTransform,k=null,l=0,g=c.frames.length;l<g;++l){var h=c.frames[l];k?k!=h&&h.transform.minus(d):(d.copyFrom(h.transform),h.transform.identity(),0==d.scaleX&&(d.scaleX=.001),0==d.scaleY&&(d.scaleY=
.001));k=h}if(1!=c.scale||0!=c.offset)this._animation.hasAsynchronyTimeline=!0;this._isOldData&&(a.PIVOT_X in b||a.PIVOT_Y in b)?(this._timelinePivot.x=a._getNumber(b,a.PIVOT_X,0),this._timelinePivot.y=a._getNumber(b,a.PIVOT_Y,0)):this._timelinePivot.clear();return c};a.prototype._parseSlotTimeline=function(b){var c=e.BaseObject.borrowObject(e.SlotTimelineData);c.slot=this._armature.getSlot(a._getString(b,a.NAME,null));this._parseTimeline(b,c,this._parseSlotFrame);if(1!=c.scale||0!=c.offset)this._animation.hasAsynchronyTimeline=
!0;return c};a.prototype._parseFFDTimeline=function(b){var c=e.BaseObject.borrowObject(e.FFDTimelineData);c.skin=this._armature.getSkin(a._getString(b,a.SKIN,null));c.slot=c.skin.getSlot(a._getString(b,a.SLOT,null));for(var d=a._getString(b,a.NAME,null),k=0,l=c.slot.displays.length;k<l;++k){var g=c.slot.displays[k];if(g.mesh&&g.name==d){c.displayIndex=k;this._mesh=g.mesh;break}}this._parseTimeline(b,c,this._parseFFDFrame);this._mesh=null;return c};a.prototype._parseAnimationFrame=function(b,c,d){var f=
e.BaseObject.borrowObject(e.AnimationFrameData);this._parseFrame(b,f,c,d);(a.ACTION in b||a.ACTIONS in b)&&this._parseActionData(b,f.actions,null,null);(a.EVENT in b||a.SOUND in b)&&this._parseEventData(b,f.events,null,null);return f};a.prototype._parseBoneFrame=function(b,c,d){var f=e.BaseObject.borrowObject(e.BoneFrameData);f.tweenRotate=a._getNumber(b,a.TWEEN_ROTATE,0);f.tweenScale=a._getBoolean(b,a.TWEEN_SCALE,!0);this._parseTweenFrame(b,f,c,d);a.TRANSFORM in b&&(c=b[a.TRANSFORM],this._parseTransform(c,
f.transform),this._isOldData&&(this._helpPoint.x=this._timelinePivot.x+a._getNumber(c,a.PIVOT_X,0),this._helpPoint.y=this._timelinePivot.y+a._getNumber(c,a.PIVOT_Y,0),f.transform.toMatrix(this._helpMatrix),this._helpMatrix.transformPoint(this._helpPoint.x,this._helpPoint.y,this._helpPoint,!0),f.transform.x+=this._helpPoint.x,f.transform.y+=this._helpPoint.y));c=this._timeline.bone;d=[];var l=[];if(a.ACTION in b||a.ACTIONS in b){var g=this._armature.getSlot(c.name);this._parseActionData(b,d,c,g)}(a.EVENT in
b||a.SOUND in b)&&this._parseEventData(b,l,c,null);(0<d.length||0<l.length)&&this._mergeFrameToAnimationTimeline(f.position,d,l);return f};a.prototype._parseSlotFrame=function(b,c,d){var f=e.BaseObject.borrowObject(e.SlotFrameData);f.displayIndex=a._getNumber(b,a.DISPLAY_INDEX,0);this._parseTweenFrame(b,f,c,d);a.COLOR in b||a.COLOR_TRANSFORM in b?(f.color=e.SlotFrameData.generateColor(),this._parseColorTransform(b[a.COLOR]||b[a.COLOR_TRANSFORM],f.color)):f.color=e.SlotFrameData.DEFAULT_COLOR;if(this._isOldData)a._getBoolean(b,
a.HIDE,!1)&&(f.displayIndex=-1);else if(a.ACTION in b||a.ACTIONS in b)c=this._timeline.slot,d=[],this._parseActionData(b,d,c.parent,c),this._mergeFrameToAnimationTimeline(f.position,d,null);return f};a.prototype._parseFFDFrame=function(b,c,d){var f=e.BaseObject.borrowObject(e.ExtensionFrameData);f.type=a._getNumber(b,a.TYPE,0);this._parseTweenFrame(b,f,c,d);c=b[a.VERTICES];b=a._getNumber(b,a.OFFSET,0);for(var l,g=0,h=this._mesh.vertices.length;g<h;g+=2)if(!c||g<b||g-b>=c.length?l=d=0:(d=c[g-b]*this._armature.scale,
l=c[g+1-b]*this._armature.scale),this._mesh.skinned){this._mesh.slotPose.transformPoint(d,l,this._helpPoint,!0);d=this._helpPoint.x;l=this._helpPoint.y;for(var m=this._mesh.boneIndices[g/2],p=0,q=m.length;p<q;++p)this._mesh.inverseBindPose[m[p]].transformPoint(d,l,this._helpPoint,!0),f.tweens.push(this._helpPoint.x,this._helpPoint.y)}else f.tweens.push(d,l);return f};a.prototype._parseTweenFrame=function(b,c,d,k){this._parseFrame(b,c,d,k);0<c.duration?(c.tweenEasing=a.TWEEN_EASING in b?a._getNumber(b,
a.TWEEN_EASING,e.DragonBones.NO_TWEEN):this._isOldData?this._isAutoTween?this._animationTweenEasing:e.DragonBones.NO_TWEEN:e.DragonBones.NO_TWEEN,this._isOldData&&1==this._animation.scale&&1==this._timeline.scale&&2>c.duration*this._armature.frameRate&&(c.tweenEasing=e.DragonBones.NO_TWEEN),a.CURVE in b&&(c.curve=e.TweenFrameData.samplingCurve(b[a.CURVE],k))):(c.tweenEasing=e.DragonBones.NO_TWEEN,c.curve=null)};a.prototype._parseFrame=function(a,c,d,e){c.position=d/this._armature.frameRate;c.duration=
e/this._armature.frameRate};a.prototype._parseTimeline=function(b,c,d){c.scale=a._getNumber(b,a.SCALE,1);c.offset=a._getNumber(b,a.OFFSET,0);this._timeline=c;if(a.FRAME in b&&(b=b[a.FRAME],0<b.length))if(1==b.length)c.frames.length=1,c.frames[0]=d.call(this,b[0],0,a._getNumber(b[0],a.DURATION,1));else{c.frames.length=this._animation.frameCount+1;for(var f=0,l=0,g=null,h=null,m=0,p=0,q=c.frames.length;m<q;++m){if(f+l<=m&&p<b.length){var t=b[p++],f=m,l=a._getNumber(t,a.DURATION,1),g=d.call(this,t,f,
l);h&&(h.next=g,g.prev=h,this._isOldData&&h instanceof e.TweenFrameData&&-1==t[a.DISPLAY_INDEX]&&(h.tweenEasing=e.DragonBones.NO_TWEEN));h=g}c.frames[m]=g}g.duration=this._animation.duration-g.position;g=c.frames[0];h.next=g;g.prev=h;this._isOldData&&h instanceof e.TweenFrameData&&-1==b[0][a.DISPLAY_INDEX]&&(h.tweenEasing=e.DragonBones.NO_TWEEN)}this._timeline=null};a.prototype._parseActionData=function(b,c,d,k){var f=b[a.ACTION]||b[a.ACTIONS]||b[a.DEFAULT_ACTIONS];if("string"==typeof f)b=e.BaseObject.borrowObject(e.ActionData),
b.type=4,b.bone=d,b.slot=k,b.data[0]=f,b.data[1]=-1,b.data[2]=-1,c.push(b);else if(f instanceof Array)for(var g=0,h=f.length;g<h;++g){var m=f[g],p=m instanceof Array;b=e.BaseObject.borrowObject(e.ActionData);var q=p?a._getParameter(m,1,null):a._getString(m,"gotoAndPlay",null);if(p){var t=m[0];b.type="string"==typeof t?a._getActionType(t):a._getParameter(m,0,4)}else b.type=2;switch(b.type){case 0:b.data[0]=q;b.data[1]=p?a._getParameter(m,2,-1):-1;break;case 1:b.data[0]=q;break;case 2:b.data[0]=q;b.data[1]=
p?a._getParameter(m,2,0):0;b.data[2]=p?a._getParameter(m,3,-1):-1;break;case 3:b.data[0]=q;b.data[1]=p?a._getParameter(m,2,0):0;break;case 4:b.data[0]=q;b.data[1]=p?a._getParameter(m,2,-1):-1;b.data[2]=p?a._getParameter(m,3,-1):-1;break;case 5:b.data[0]=q,b.data[1]=p?a._getParameter(m,2,0):0}b.bone=d;b.slot=k;c.push(b)}};a.prototype._parseEventData=function(b,c,d,k){if(a.SOUND in b){var f=e.BaseObject.borrowObject(e.EventData);f.type=11;f.name=b[a.SOUND];f.bone=d;f.slot=k;c.push(f)}a.EVENT in b&&
(f=e.BaseObject.borrowObject(e.EventData),f.type=10,f.name=b[a.EVENT],f.bone=d,f.slot=k,a.DATA in b&&(f.data=b[a.DATA]),c.push(f))};a.prototype._parseTransform=function(b,c){c.x=a._getNumber(b,a.X,0)*this._armature.scale;c.y=a._getNumber(b,a.Y,0)*this._armature.scale;c.skewX=a._getNumber(b,a.SKEW_X,0)*e.DragonBones.ANGLE_TO_RADIAN;c.skewY=a._getNumber(b,a.SKEW_Y,0)*e.DragonBones.ANGLE_TO_RADIAN;c.scaleX=a._getNumber(b,a.SCALE_X,1);c.scaleY=a._getNumber(b,a.SCALE_Y,1)};a.prototype._parseColorTransform=
function(b,c){c.alphaMultiplier=.01*a._getNumber(b,a.ALPHA_MULTIPLIER,100);c.redMultiplier=.01*a._getNumber(b,a.RED_MULTIPLIER,100);c.greenMultiplier=.01*a._getNumber(b,a.GREEN_MULTIPLIER,100);c.blueMultiplier=.01*a._getNumber(b,a.BLUE_MULTIPLIER,100);c.alphaOffset=a._getNumber(b,a.ALPHA_OFFSET,0);c.redOffset=a._getNumber(b,a.RED_OFFSET,0);c.greenOffset=a._getNumber(b,a.GREEN_OFFSET,0);c.blueOffset=a._getNumber(b,a.BLUE_OFFSET,0)};a.prototype.parseDragonBonesData=function(b,c){void 0===c&&(c=1);if(b){var d=
a._getString(b,a.VERSION,null);this._isGlobalTransform=(this._isOldData=d==a.DATA_VERSION_2_3||d==a.DATA_VERSION_3_0)?a._getBoolean(b,a.IS_GLOBAL,!0):!1;if(d==a.DATA_VERSION||d==a.DATA_VERSION_4_0||this._isOldData){d=e.BaseObject.borrowObject(e.DragonBonesData);d.name=a._getString(b,a.NAME,null);d.frameRate=a._getNumber(b,a.FRAME_RATE,24)||24;if(a.ARMATURE in b){this._data=d;for(var f=b[a.ARMATURE],l=0,g=f.length;l<g;++l)d.addArmature(this._parseArmature(f[l],c));this._data=null}return d}throw Error("Nonsupport data version.");
}throw Error("No data.");};a.prototype.parseTextureAtlasData=function(b,c,d){void 0===d&&(d=0);if(b){if(c.name=a._getString(b,a.NAME,null),c.imagePath=a._getString(b,a.IMAGE_PATH,null),0<d?c.scale=d:d=c.scale=a._getNumber(b,a.SCALE,c.scale),d=1/d,a.SUB_TEXTURE in b){b=b[a.SUB_TEXTURE];for(var f=0,l=b.length;f<l;++f){var g=b[f],h=c.generateTextureData();h.name=a._getString(g,a.NAME,null);h.rotated=a._getBoolean(g,a.ROTATED,!1);h.region.x=a._getNumber(g,a.X,0)*d;h.region.y=a._getNumber(g,a.Y,0)*d;h.region.width=
a._getNumber(g,a.WIDTH,0)*d;h.region.height=a._getNumber(g,a.HEIGHT,0)*d;var m=a._getNumber(g,a.FRAME_WIDTH,-1),p=a._getNumber(g,a.FRAME_HEIGHT,-1);0<m&&0<p&&(h.frame=e.TextureData.generateRectangle(),h.frame.x=a._getNumber(g,a.FRAME_X,0)*d,h.frame.y=a._getNumber(g,a.FRAME_Y,0)*d,h.frame.width=m*d,h.frame.height=p*d);c.addTexture(h)}}}else throw Error("No data.");};a.getInstance=function(){a._instance||(a._instance=new a);return a._instance};a._instance=null;return a}(e.DataParser);e.ObjectDataParser=
h})(dragonBones||(dragonBones={}));
(function(e){var h=function(c){function a(){c.call(this);this.textures={}}__extends(a,c);a.prototype._onClear=function(){for(var a in this.textures)this.textures[a].returnToPool(),delete this.textures[a];this.autoSearch=!1;this.scale=1;this.imagePath=this.name=null};a.prototype.addTexture=function(a){if(a&&a.name&&!this.textures[a.name])this.textures[a.name]=a,a.parent=this;else throw Error();};a.prototype.getTexture=function(a){return this.textures[a]};return a}(e.BaseObject);e.TextureAtlasData=
h;h=function(c){function a(){c.call(this);this.region=new e.Rectangle}__extends(a,c);a.generateRectangle=function(){return new e.Rectangle};a.prototype._onClear=function(){this.rotated=!1;this.parent=this.frame=this.name=null;this.region.clear()};return a}(e.BaseObject);e.TextureData=h})(dragonBones||(dragonBones={}));
(function(e){var h=function(){function c(a){void 0===a&&(a=null);this.autoSearch=!1;this._dragonBonesDataMap={};this._textureAtlasDataMap={};this._dataParser=a;this._dataParser||(c._defaultParser||(c._defaultParser=new e.ObjectDataParser),this._dataParser=c._defaultParser)}c.prototype._getTextureData=function(a,b){var c,d=this._textureAtlasDataMap[a];if(d)for(var e=0,l=d.length;e<l;++e)if(c=d[e].getTexture(b))return c;if(this.autoSearch)for(e in this._textureAtlasDataMap)for(var d=this._textureAtlasDataMap[e],
l=0,g=d.length;l<g;++l)if(c=d[l],c.autoSearch&&(c=c.getTexture(b)))return c;return null};c.prototype._fillBuildArmaturePackage=function(a,b,c,d){var e,f;if(a&&(f=this._dragonBonesDataMap[a])&&(e=f.getArmature(b)))return d.dataName=a,d.data=f,d.armature=e,d.skin=e.getSkin(c),d.skin||(d.skin=e.defaultSkin),!0;if(!a||this.autoSearch)for(var g in this._dragonBonesDataMap)if(f=this._dragonBonesDataMap[g],!a||f.autoSearch)if(e=f.getArmature(b))return d.dataName=g,d.data=f,d.armature=e,d.skin=e.getSkin(c),
d.skin||(d.skin=e.defaultSkin),!0;return!1};c.prototype._buildBones=function(a,b){for(var c=a.armature.sortedBones,d=0,k=c.length;d<k;++d){var l=c[d],g=e.BaseObject.borrowObject(e.Bone);g.name=l.name;g.inheritTranslation=l.inheritTranslation;g.inheritRotation=l.inheritRotation;g.inheritScale=l.inheritScale;g.length=l.length;g.origin.copyFrom(l.transform);l.parent?b.addBone(g,l.parent.name):b.addBone(g);l.ik&&(g.ikBendPositive=l.bendPositive,g.ikWeight=l.weight,g._setIK(b.getBone(l.ik.name),l.chain,
l.chainIndex))}};c.prototype._buildSlots=function(a,b){var c=a.skin;var d=a.armature.defaultSkin,e={};for(g in d.slots){var l=d.slots[g];e[l.slot.name]=l}if(c!=d)for(g in c.slots)l=c.slots[g],e[l.slot.name]=l;d=a.armature.sortedSlots;var g=0;for(var h=d.length;g<h;++g)if(c=d[g],l=e[c.name]){var m=this._generateSlot(a,l);m&&(m._displayDataSet=l,m._setDisplayIndex(c.displayIndex),m._setBlendMode(c.blendMode),m._setColor(c.color),m._replacedDisplayDataSet.length=m._displayDataSet.displays.length,b.addSlot(m,
c.parent.name))}};c.prototype._replaceSlotDisplay=function(a,b,c,d){0>d&&(d=c.displayIndex);if(0<=d){var e=c.displayList;e.length<=d&&(e.length=d+1);c._replacedDisplayDataSet.length<=d&&(c._replacedDisplayDataSet.length=d+1);c._replacedDisplayDataSet[d]=b;1==b.type?(a=this.buildArmature(b.name,a.dataName),e[d]=a):(b.texture||(b.texture=this._getTextureData(a.dataName,b.name)),e[d]=b.mesh||d<c._displayDataSet.displays.length&&c._displayDataSet.displays[d].mesh?c.MeshDisplay:c.rawDisplay);c.displayList=
e;c.invalidUpdate()}};c.prototype.parseDragonBonesData=function(a,b){void 0===b&&(b=null);var c=this._dataParser.parseDragonBonesData(a,1);this.addDragonBonesData(c,b);return c};c.prototype.parseTextureAtlasData=function(a,b,c,d){void 0===c&&(c=null);void 0===d&&(d=0);var e=this._generateTextureAtlasData(null,null);this._dataParser.parseTextureAtlasData(a,e,d);this._generateTextureAtlasData(e,b);this.addTextureAtlasData(e,c);return e};c.prototype.getDragonBonesData=function(a){return this._dragonBonesDataMap[a]};
c.prototype.addDragonBonesData=function(a,b){void 0===b&&(b=null);if(a)(b=b||a.name)?this._dragonBonesDataMap[b]?console.warn("Same name data."):this._dragonBonesDataMap[b]=a:console.warn("Unnamed data.");else throw Error();};c.prototype.removeDragonBonesData=function(a,b){void 0===b&&(b=!0);var c=this._dragonBonesDataMap[a];if(c){if(b){if(e.DragonBones.debug)for(var d=0,k=e.DragonBones._armatures.length;d<k;++d){var l=e.DragonBones._armatures[d];if(l.armatureData.parent==c)throw Error("ArmatureData: "+
l.armatureData.name+" DragonBonesData: "+a);}c.returnToPool()}delete this._dragonBonesDataMap[a]}};c.prototype.getTextureAtlasData=function(a){return this._textureAtlasDataMap[a]};c.prototype.addTextureAtlasData=function(a,b){void 0===b&&(b=null);if(a)if(b=b||a.name){var c=this._textureAtlasDataMap[b]=this._textureAtlasDataMap[b]||[];0>c.indexOf(a)&&c.push(a)}else console.warn("Unnamed data.");else throw Error();};c.prototype.removeTextureAtlasData=function(a,b){void 0===b&&(b=!0);var c=this._textureAtlasDataMap[a];
if(c){if(b)for(var d=0,e=c.length;d<e;++d)c[d].returnToPool();delete this._textureAtlasDataMap[a]}};c.prototype.clear=function(a){void 0===a&&(a=!0);for(var b in this._dragonBonesDataMap)a&&this._dragonBonesDataMap[b].returnToPool(),delete this._dragonBonesDataMap[b];for(b in this._textureAtlasDataMap){if(a)for(var c=this._textureAtlasDataMap[b],d=0,e=c.length;d<e;++d)c[d].returnToPool();delete this._textureAtlasDataMap[b]}};c.prototype.buildArmature=function(a,b,c){void 0===b&&(b=null);void 0===
c&&(c=null);var d={};return this._fillBuildArmaturePackage(b,a,c,d)?(a=this._generateArmature(d),this._buildBones(d,a),this._buildSlots(d,a),a.advanceTime(0),a):null};c.prototype.copyAnimationsToArmature=function(a,b,c,d,k){void 0===c&&(c=null);void 0===d&&(d=null);void 0===k&&(k=!0);var f={};if(this._fillBuildArmaturePackage(d,b,c,f)){b=f.armature;if(k)a.animation.animations=b.animations;else{var g={};for(h in a.animation.animations)g[h]=a.animation.animations[h];for(h in b.animations)g[h]=b.animations[h];
a.animation.animations=g}if(f.skin){a=a.getSlots();var h=0;for(b=a.length;h<b;++h)for(var g=a[h],m=g.displayList,p=0,q=m.length;p<q;++p){var t=m[p];if(t instanceof e.Armature){var r=f.skin.getSlot(g.name).displays;p<r.length&&(r=r[p],1==r.type&&this.copyAnimationsToArmature(t,r.name,c,d,k))}}return!0}}return!1};c.prototype.replaceSlotDisplay=function(a,b,c,d,e,h){void 0===h&&(h=-1);var f={};if(this._fillBuildArmaturePackage(a,b,null,f)&&(a=f.skin.getSlot(c)))for(b=0,c=a.displays.length;b<c;++b){var k=
a.displays[b];if(k.name==d){this._replaceSlotDisplay(f,k,e,h);break}}};c.prototype.replaceSlotDisplayList=function(a,b,c,d){var e={};if(this._fillBuildArmaturePackage(a,b,null,e)&&(a=e.skin.getSlot(c))){c=b=0;for(var f=a.displays.length;c<f;++c)this._replaceSlotDisplay(e,a.displays[c],d,b++)}};c.prototype.getAllDragonBonesData=function(){return this._dragonBonesDataMap};c.prototype.getAllTextureAtlasData=function(){return this._textureAtlasDataMap};c._defaultParser=null;return c}();e.BaseFactory=
h})(dragonBones||(dragonBones={}));